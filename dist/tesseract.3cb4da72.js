(self.webpackChunkmtg_scanner=self.webpackChunkmtg_scanner||[]).push([[671],{28:e=>{e.exports=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`},39:e=>{e.exports=async(e,t)=>{e.postMessage(t)}},119:e=>{e.exports={workerBlobURL:!0,logger:()=>{}}},125:e=>{"use strict";e.exports={rE:"5.1.1"}},321:(e,t,a)=>{const o=a(848),r=a(456),n=a(548),s=a(381),i=a(39),l=a(996);e.exports={defaultOptions:o,spawnWorker:r,terminateWorker:n,onMessage:s,send:i,loadImage:l}},381:e=>{e.exports=(e,t)=>{e.onmessage=({data:e})=>{t(e)}}},456:e=>{e.exports=({workerPath:e,workerBlobURL:t})=>{let a;if(Blob&&URL&&t){const t=new Blob([`importScripts("${e}");`],{type:"application/javascript"});a=new Worker(URL.createObjectURL(t))}else a=new Worker(e);return a}},465:(e,t,a)=>{const o=a(477);e.exports={recognize:async(e,t,a)=>{const r=await o(t,1,a);return r.recognize(e).finally((async()=>{await r.terminate()}))},detect:async(e,t)=>{const a=await o("osd",0,t);return a.detect(e).finally((async()=>{await a.terminate()}))}}},477:(e,t,a)=>{const o=a(981),r=a(760),n=a(500),{log:s}=a(787),i=a(28),l=a(742),{defaultOptions:c,spawnWorker:d,terminateWorker:p,onMessage:g,loadImage:h,send:u}=a(321);let y=0;e.exports=async(e="eng",t=l.LSTM_ONLY,a={},f={})=>{const L=i("Worker",y),{logger:m,errorHandler:E,...w}=o({...c,...a}),S={},A={},k="string"==typeof e?e.split("+"):e;let b=t,T=f;const R=[l.DEFAULT,l.LSTM_ONLY].includes(t)&&!w.legacyCore;let O,_;const N=new Promise(((e,t)=>{_=e,O=t}));let I=d(w);I.onerror=e=>{O(e.message)},y+=1;const P=(e,t)=>{S[e]=t},M=(e,t)=>{A[e]=t},C=({id:e,action:t,payload:a})=>new Promise(((o,r)=>{s(`[${L}]: Start ${e}, action=${t}`);const n=`${t}-${e}`;P(n,o),M(n,r),u(I,{workerId:L,jobId:e,action:t,payload:a})})),U=(e,t)=>C(n({id:t,action:"loadLanguage",payload:{langs:e,options:{langPath:w.langPath,dataPath:w.dataPath,cachePath:w.cachePath,cacheMethod:w.cacheMethod,gzip:w.gzip,lstmOnly:[l.DEFAULT,l.LSTM_ONLY].includes(b)&&!w.legacyLang}}})),D=(e,t,a,o)=>C(n({id:o,action:"initialize",payload:{langs:e,oem:t,config:a}}));g(I,(({workerId:e,jobId:t,status:a,action:o,data:n})=>{const i=`${o}-${t}`;if("resolve"===a){s(`[${e}]: Complete ${t}`);let a=n;"recognize"===o?a=r(n):"getPDF"===o&&(a=Array.from({...n,length:Object.keys(n).length})),S[i]({jobId:t,data:a})}else if("reject"===a){if(A[i](n),"load"===o&&O(n),!E)throw Error(n);E(n)}else"progress"===a&&m({...n,userJobId:t})}));const x={id:L,worker:I,setResolve:P,setReject:M,load:()=>{},writeText:(e,t,a)=>C(n({id:a,action:"FS",payload:{method:"writeFile",args:[e,t]}})),readText:(e,t)=>C(n({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}})),removeFile:(e,t)=>C(n({id:t,action:"FS",payload:{method:"unlink",args:[e]}})),FS:(e,t,a)=>C(n({id:a,action:"FS",payload:{method:e,args:t}})),loadLanguage:()=>{},initialize:()=>{},reinitialize:(e="eng",t,a,o)=>{if(R&&[l.TESSERACT_ONLY,l.TESSERACT_LSTM_COMBINED].includes(t))throw Error("Legacy model requested but code missing.");const r=t||b;b=r;const n=a||T;T=n;const s=("string"==typeof e?e.split("+"):e).filter((e=>!k.includes(e)));return k.push(...s),s.length>0?U(s,o).then((()=>D(e,r,n,o))):D(e,r,n,o)},setParameters:(e={},t)=>C(n({id:t,action:"setParameters",payload:{params:e}})),recognize:async(e,t={},a={blocks:!0,text:!0,hocr:!0,tsv:!0},o)=>C(n({id:o,action:"recognize",payload:{image:await h(e),options:t,output:a}})),getPDF:(e="Tesseract OCR Result",t=!1,a)=>C(n({id:a,action:"getPDF",payload:{title:e,textonly:t}})),detect:async(e,t)=>{if(R)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return C(n({id:t,action:"detect",payload:{image:await h(e)}}))},terminate:async()=>(null!==I&&(p(I),I=null),Promise.resolve())};var $;return C(n({id:$,action:"load",payload:{options:{lstmOnly:R,corePath:w.corePath,logging:w.logging}}})).then((()=>U(e))).then((()=>D(e,t,f))).then((()=>_(x))).catch((()=>{})),N}},500:(e,t,a)=>{const o=a(28);let r=0;e.exports=({id:e,action:t,payload:a={}})=>{let n=e;return void 0===n&&(n=o("Job",r),r+=1),{id:n,action:t,payload:a}}},548:e=>{e.exports=e=>{e.terminate()}},646:e=>{e.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},742:e=>{e.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},760:e=>{e.exports=e=>{const t=[],a=[],o=[],r=[],n=[];return e.blocks&&e.blocks.forEach((s=>{s.paragraphs.forEach((t=>{t.lines.forEach((a=>{a.words.forEach((o=>{o.symbols.forEach((r=>{n.push({...r,page:e,block:s,paragraph:t,line:a,word:o})})),r.push({...o,page:e,block:s,paragraph:t,line:a})})),o.push({...a,page:e,block:s,paragraph:t})})),a.push({...t,page:e,block:s})})),t.push({...s,page:e})})),{...e,blocks:t,paragraphs:a,lines:o,words:r,symbols:n}}},787:function(e,t){let a=!1;t.logging=a,t.setLogging=e=>{a=e},t.log=(...e)=>a?void 0:null},820:(e,t,a)=>{const o=a(866);e.exports=e=>{const t={};return"undefined"!=typeof WorkerGlobalScope?t.type="webworker":o()?t.type="electron":"object"==typeof document?t.type="browser":"object"==typeof process&&(t.type="node"),void 0===e?t:t[e]}},848:(e,t,a)=>{const o=a(125).rE,r=a(119);e.exports={...r,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${o}/dist/worker.min.js`}},882:function(e,t,a){const o=a(500),{log:r}=a(787),n=a(28);let s=0;e.exports=()=>{const e=n("Scheduler",s),t={},a={};let i=[];s+=1;const l=()=>Object.keys(t).length,c=()=>{if(0!==i.length){const e=Object.keys(t);for(let o=0;o<e.length;o+=1)if(void 0===a[e[o]]){i[0](t[e[o]]);break}}},d=(t,n)=>new Promise(((s,l)=>{const d=o({action:t,payload:n});i.push((async e=>{i.shift(),a[e.id]=d;try{s(await e[t].apply(this,[...n,d.id]))}catch(e){l(e)}finally{delete a[e.id],c()}})),r(`[${e}]: Add ${d.id} to JobQueue`),r(`[${e}]: JobQueue length=${i.length}`),c()}));return{addWorker:a=>(t[a.id]=a,r(`[${e}]: Add ${a.id}`),r(`[${e}]: Number of workers=${l()}`),c(),a.id),addJob:async(t,...a)=>{if(0===l())throw Error(`[${e}]: You need to have at least one worker before adding jobs`);return d(t,a)},terminate:async()=>{Object.keys(t).forEach((async e=>{await t[e].terminate()})),i=[]},getQueueLen:()=>i.length,getNumWorkers:l}}},949:e=>{e.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},981:(e,t,a)=>{const o="browser"===a(820)("type")?e=>new URL(e,window.location.href).href:e=>e;e.exports=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach((a=>{e[a]&&(t[a]=o(t[a]))})),t}},995:(e,t,a)=>{a(452);const o=a(882),r=a(477),n=a(465),s=a(646),i=a(742),l=a(949),{setLogging:c}=a(787);e.exports={languages:s,OEM:i,PSM:l,createScheduler:o,createWorker:r,setLogging:c,...n}},996:e=>{const t=e=>new Promise(((t,a)=>{const o=new FileReader;o.onload=()=>{t(o.result)},o.onerror=({target:{error:{code:e}}})=>{a(Error(`File could not be read! Code=${e}`))},o.readAsArrayBuffer(e)})),a=async e=>{let o=e;if(void 0===e)return"undefined";if("string"==typeof e)if(/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e))o=atob(e.split(",")[1]).split("").map((e=>e.charCodeAt(0)));else{const t=await fetch(e);o=await t.arrayBuffer()}else if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)"IMG"===e.tagName&&(o=await a(e.src)),"VIDEO"===e.tagName&&(o=await a(e.poster)),"CANVAS"===e.tagName&&await new Promise((a=>{e.toBlob((async e=>{o=await t(e),a()}))}));else if("undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas){const a=await e.convertToBlob();o=await t(a)}else(e instanceof File||e instanceof Blob)&&(o=await t(e));return new Uint8Array(o)};e.exports=a}}]);
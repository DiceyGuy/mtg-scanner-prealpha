{"ast":null,"code":"import _objectSpread from\"C:/Users/kim-a/Documents/DiceyTeck/MTG Scanner BACKUP/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Scanner.js - COMPLETE INTEGRATED VERSION with Working Cooldown & Knowledge Base\nimport React,{useState,useRef,useEffect}from'react';import ClaudeVisionService from'./ClaudeVisionService';import'./CardDisplay.css';// ðŸ”¥ INTEGRATED PROFESSIONAL COMPONENTS\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProfessionalCooldownStatus=_ref=>{let{cooldownStatus,isVisible}=_ref;if(!isVisible||!cooldownStatus)return null;return/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'10px',right:'10px',background:'rgba(0,0,0,0.85)',color:'white',padding:'12px',borderRadius:'8px',fontSize:'11px',fontFamily:'monospace',border:'1px solid #4a90e2',minWidth:'220px',zIndex:1000},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#4a90e2',fontWeight:'bold',marginBottom:'6px',textAlign:'center'},children:\"\\uD83D\\uDD25 COOLDOWN DEBUG STATUS\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{children:\"API:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#64b5f6'},children:[Math.ceil(cooldownStatus.apiCooldown/1000),\"s\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Same Card:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#64b5f6'},children:[Math.ceil(cooldownStatus.sameCardCooldown/1000),\"s\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Consecutive:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#64b5f6'},children:[cooldownStatus.consecutiveDetections,\"/2\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Stability:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#64b5f6'},children:[cooldownStatus.detectionBufferSize||0,\"/\",cooldownStatus.stabilityRequired||3]})]}),cooldownStatus.longPauseRemaining>0&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Long Pause:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#ffc107'},children:[Math.ceil(cooldownStatus.longPauseRemaining/1000),\"s\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'6px',padding:'4px',background:cooldownStatus.canScan?'rgba(40, 167, 69, 0.3)':'rgba(220, 53, 69, 0.3)',borderRadius:'4px',textAlign:'center',fontWeight:'bold'},children:cooldownStatus.canScan?'âœ… Ready':'â³ Cooldown'})]});};const ProfessionalTabs=_ref2=>{let{activeTab,onTabChange,savedCards}=_ref2;const tabs=[{id:'scanner',label:'ðŸ” Scanner',badge:null},{id:'deck',label:'ðŸƒ Collection',badge:(savedCards===null||savedCards===void 0?void 0:savedCards.length)||0},{id:'knowledge',label:'ðŸ“š Knowledge',badge:null}];return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:'4px',marginBottom:'20px',background:'rgba(255, 255, 255, 0.05)',padding:'4px',borderRadius:'12px',border:'1px solid rgba(255, 255, 255, 0.1)'},children:tabs.map(tab=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onTabChange(tab.id),style:{flex:1,padding:'12px 16px',border:'none',background:activeTab===tab.id?'linear-gradient(45deg, #4a90e2, #64b5f6)':'transparent',color:activeTab===tab.id?'white':'#94a3b8',borderRadius:'8px',cursor:'pointer',fontSize:'14px',fontWeight:'600',display:'flex',alignItems:'center',justifyContent:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{children:tab.label}),tab.badge!==null&&/*#__PURE__*/_jsx(\"span\",{style:{background:'rgba(74, 144, 226, 0.2)',color:'#4a90e2',padding:'2px 6px',borderRadius:'10px',fontSize:'11px',fontWeight:'700'},children:tab.badge})]},tab.id))});};const showProfessionalToast=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';let duration=arguments.length>2&&arguments[2]!==undefined?arguments[2]:3000;const existingToasts=document.querySelectorAll('.toast-message');existingToasts.forEach(toast=>toast.remove());const toast=document.createElement('div');toast.className='toast-message';toast.style.cssText=\"\\n        position: fixed;\\n        top: 20px;\\n        right: 20px;\\n        background: \".concat(type==='success'?'#28a745':type==='error'?'#dc3545':'#17a2b8',\";\\n        color: white;\\n        padding: 12px 20px;\\n        border-radius: 6px;\\n        z-index: 10001;\\n        font-weight: 500;\\n        box-shadow: 0 4px 12px rgba(0,0,0,0.2);\\n        max-width: 300px;\\n    \");toast.textContent=message;document.body.appendChild(toast);setTimeout(()=>{if(toast.parentNode){toast.parentNode.removeChild(toast);}},duration);};// ðŸ”¥ INTEGRATED MTG KNOWLEDGE BASE COMPONENT\nconst MTGKnowledgeBase=_ref3=>{let{currentCard=null,savedCards=[]}=_ref3;const[activeSection,setActiveSection]=useState('current');const getCollectionInsights=()=>{if(savedCards.length===0)return null;const colorCount={};const typeCount={};savedCards.forEach(card=>{if(card.colors&&Array.isArray(card.colors)){card.colors.forEach(color=>{colorCount[color]=(colorCount[color]||0)+1;});}if(card.cardType){const mainType=card.cardType.split('â€”')[0].trim();typeCount[mainType]=(typeCount[mainType]||0)+1;}});return{colorCount,typeCount,totalCards:savedCards.length};};const getRarityColor=rarity=>{const colors={common:'#1e1e1e',uncommon:'#c0c0c0',rare:'#ffd700',mythic:'#ff8c00'};return colors[rarity===null||rarity===void 0?void 0:rarity.toLowerCase()]||'#ffffff';};const getColorSymbol=color=>{const symbols={W:'âšª',U:'ðŸ”µ',B:'âš«',R:'ðŸ”´',G:'ðŸŸ¢'};return symbols[color]||'âšª';};const getColorName=color=>{const names={W:'White',U:'Blue',B:'Black',R:'Red',G:'Green'};return names[color]||color;};const getCardAnalysis=card=>{if(!card.cardType)return'Card type information not available.';const type=card.cardType.toLowerCase();if(type.includes('creature')){return'This creature can attack and block. Consider its power, toughness, and any special abilities when building your deck.';}else if(type.includes('instant')){return'This instant can be played at any time you have priority, including during your opponent\\'s turn or in response to other spells.';}else if(type.includes('sorcery')){return'This sorcery can only be played during your main phases when the stack is empty and you have priority.';}else if(type.includes('enchantment')){return'This enchantment provides ongoing effects while it remains on the battlefield.';}else if(type.includes('artifact')){return'This artifact is colorless and can fit into any deck, but may be vulnerable to artifact removal.';}else if(type.includes('land')){return'This land can produce mana to cast your spells. Most decks play lands every turn.';}else if(type.includes('planeswalker')){return'This planeswalker is a powerful ally that can use loyalty abilities. Protect it from attacks!';}return'This card has a unique type. Check its rules text for specific interactions.';};const insights=getCollectionInsights();return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',color:'white'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#4a90e2',marginBottom:'24px',display:'flex',alignItems:'center',gap:'10px'},children:\"\\uD83D\\uDCDA MTG Knowledge Base\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',marginBottom:'24px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveSection('current'),style:{padding:'10px 20px',background:activeSection==='current'?'#4a90e2':'rgba(74, 144, 226, 0.1)',color:activeSection==='current'?'white':'#4a90e2',border:'1px solid #4a90e2',borderRadius:'8px',cursor:'pointer',fontSize:'14px',fontWeight:'600'},children:\"\\uD83D\\uDD0D Current Card\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveSection('collection'),style:{padding:'10px 20px',background:activeSection==='collection'?'#4a90e2':'rgba(74, 144, 226, 0.1)',color:activeSection==='collection'?'white':'#4a90e2',border:'1px solid #4a90e2',borderRadius:'8px',cursor:'pointer',fontSize:'14px',fontWeight:'600'},children:\"\\uD83D\\uDCCA Collection\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveSection('rules'),style:{padding:'10px 20px',background:activeSection==='rules'?'#4a90e2':'rgba(74, 144, 226, 0.1)',color:activeSection==='rules'?'white':'#4a90e2',border:'1px solid #4a90e2',borderRadius:'8px',cursor:'pointer',fontSize:'14px',fontWeight:'600'},children:\"\\uD83D\\uDCD6 Rules\"})]}),activeSection==='current'&&/*#__PURE__*/_jsx(\"div\",{children:currentCard?/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(74, 144, 226, 0.1)',padding:'24px',borderRadius:'12px',border:'1px solid rgba(74, 144, 226, 0.3)'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{color:'#4a90e2',marginBottom:'16px'},children:[\"\\uD83C\\uDFAF Analyzing: \",currentCard.cardName]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'12px',marginBottom:'16px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#94a3b8'},children:\"Type:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'600'},children:currentCard.cardType||'Unknown'})]}),currentCard.manaCost&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#94a3b8'},children:\"Mana Cost:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'600'},children:currentCard.manaCost})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#94a3b8'},children:\"Set:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'600'},children:currentCard.setInfo||'Unknown'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#94a3b8'},children:\"Rarity:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'600',color:getRarityColor(currentCard.rarity)},children:currentCard.rarity||'Unknown'})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255, 255, 255, 0.05)',padding:'16px',borderRadius:'8px',marginTop:'16px'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{color:'#e2e8f0',marginBottom:'8px'},children:\"\\uD83D\\uDCA1 Quick Analysis\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#94a3b8',fontSize:'14px',lineHeight:'1.5'},children:getCardAnalysis(currentCard)})]}),currentCard.scryfallUri&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.open(currentCard.scryfallUri,'_blank'),style:{marginTop:'16px',padding:'10px 20px',background:'rgba(74, 144, 226, 0.2)',border:'1px solid #4a90e2',color:'#4a90e2',borderRadius:'8px',cursor:'pointer',fontSize:'14px',fontWeight:'600'},children:\"\\uD83D\\uDD17 View on Scryfall\"})]}):/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'60px 20px',background:'rgba(255, 255, 255, 0.02)',borderRadius:'12px',border:'1px dashed rgba(255, 255, 255, 0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'16px'},children:\"\\uD83C\\uDCCF\"}),/*#__PURE__*/_jsx(\"h3\",{style:{color:'#e2e8f0',marginBottom:'8px'},children:\"No Card Selected\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#94a3b8'},children:\"Scan a card in the Scanner tab to see detailed analysis here.\"})]})}),activeSection==='collection'&&/*#__PURE__*/_jsx(\"div\",{children:insights?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(34, 197, 94, 0.1)',padding:'24px',borderRadius:'12px',border:'1px solid rgba(34, 197, 94, 0.3)',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'#22c55e',marginBottom:'16px'},children:\"\\uD83D\\uDCCA Collection Overview\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'32px',fontWeight:'bold',color:'#22c55e',marginBottom:'8px'},children:insights.totalCards}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#94a3b8'},children:\"Total Cards Scanned\"})]}),Object.keys(insights.colorCount).length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255, 255, 255, 0.05)',padding:'20px',borderRadius:'12px',border:'1px solid rgba(255, 255, 255, 0.1)',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{color:'#e2e8f0',marginBottom:'16px'},children:\"\\uD83C\\uDFA8 Color Distribution\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:'8px'},children:Object.entries(insights.colorCount).map(_ref4=>{let[color,count]=_ref4;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'8px 0'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{color:getColorName(color)},children:[getColorSymbol(color),\" \",getColorName(color)]}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'600'},children:count})]},color);})})]}),Object.keys(insights.typeCount).length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255, 255, 255, 0.05)',padding:'20px',borderRadius:'12px',border:'1px solid rgba(255, 255, 255, 0.1)'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{color:'#e2e8f0',marginBottom:'16px'},children:\"\\uD83C\\uDFAD Card Types\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:'8px'},children:Object.entries(insights.typeCount).map(_ref5=>{let[type,count]=_ref5;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'8px 0'},children:[/*#__PURE__*/_jsx(\"span\",{children:type}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'600'},children:count})]},type);})})]})]}):/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'60px 20px',background:'rgba(255, 255, 255, 0.02)',borderRadius:'12px',border:'1px dashed rgba(255, 255, 255, 0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'16px'},children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"h3\",{style:{color:'#e2e8f0',marginBottom:'8px'},children:\"No Collection Data\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#94a3b8'},children:\"Start scanning cards to see collection insights and analytics.\"})]})}),activeSection==='rules'&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'16px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255, 255, 255, 0.05)',padding:'20px',borderRadius:'12px',border:'1px solid rgba(255, 255, 255, 0.1)'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{color:'#4a90e2',marginBottom:'12px'},children:\"\\u26A1 Quick Rules\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'12px',fontSize:'14px',lineHeight:'1.5'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Turn Order:\"}),\" Untap \\u2192 Upkeep \\u2192 Draw \\u2192 Main 1 \\u2192 Combat \\u2192 Main 2 \\u2192 End\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Priority:\"}),\" Active player gets priority first, then passes around\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Stack:\"}),\" Last spell cast resolves first (LIFO)\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Summoning Sickness:\"}),\" Creatures can't attack or use tap abilities on first turn\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255, 255, 255, 0.05)',padding:'20px',borderRadius:'12px',border:'1px solid rgba(255, 255, 255, 0.1)'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{color:'#4a90e2',marginBottom:'12px'},children:\"\\uD83D\\uDEE1\\uFE0F Combat Basics\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'12px',fontSize:'14px',lineHeight:'1.5'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Flying:\"}),\" Can only be blocked by creatures with flying or reach\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"First Strike:\"}),\" Deals damage before normal combat damage\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Deathtouch:\"}),\" Any damage dealt destroys the creature\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Trample:\"}),\" Excess damage goes to defending player\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',marginTop:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'12px',justifyContent:'center',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.open('https://magic.wizards.com/en/rules','_blank'),style:{padding:'10px 20px',background:'rgba(74, 144, 226, 0.2)',border:'1px solid #4a90e2',color:'#4a90e2',borderRadius:'8px',cursor:'pointer',fontSize:'14px',fontWeight:'600'},children:\"\\uD83D\\uDCD6 Official Rules\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.open('https://scryfall.com/','_blank'),style:{padding:'10px 20px',background:'rgba(74, 144, 226, 0.2)',border:'1px solid #4a90e2',color:'#4a90e2',borderRadius:'8px',cursor:'pointer',fontSize:'14px',fontWeight:'600'},children:\"\\uD83D\\uDD0D Scryfall\"})]})})]})]});};// ðŸ”¥ SIMPLE DECK MANAGER COMPONENT\nconst DeckManager=_ref6=>{let{savedCards,onRemoveCard,onOpenScryfall}=_ref6;const[viewMode,setViewMode]=useState('grid');const[searchTerm,setSearchTerm]=useState('');const[sortBy,setSortBy]=useState('name');const filteredAndSortedCards=savedCards.filter(card=>card.cardName.toLowerCase().includes(searchTerm.toLowerCase())||card.cardType&&card.cardType.toLowerCase().includes(searchTerm.toLowerCase())).sort((a,b)=>{switch(sortBy){case'name':return a.cardName.localeCompare(b.cardName);case'type':return(a.cardType||'').localeCompare(b.cardType||'');case'set':return(a.setInfo||'').localeCompare(b.setInfo||'');case'date':return new Date(b.addedAt)-new Date(a.addedAt);default:return 0;}});const exportToMoxfield=()=>{const moxfieldFormat=savedCards.map(card=>\"1 \".concat(card.cardName)).join('\\n');const blob=new Blob([moxfieldFormat],{type:'text/plain'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='mtg_collection.txt';a.click();URL.revokeObjectURL(url);showProfessionalToast('ðŸ“ Collection exported successfully!','success');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{style:{color:'#4a90e2',marginBottom:'24px',display:'flex',alignItems:'center',gap:'10px'},children:[\"\\uD83C\\uDCCF Card Collection (\",savedCards.length,\" cards)\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'12px',marginBottom:'24px',flexWrap:'wrap',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search cards...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:{padding:'8px 12px',background:'rgba(255, 255, 255, 0.1)',border:'1px solid rgba(255, 255, 255, 0.2)',borderRadius:'6px',color:'white',fontSize:'14px',minWidth:'200px'}}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),style:{padding:'8px 12px',background:'rgba(255, 255, 255, 0.1)',border:'1px solid rgba(255, 255, 255, 0.2)',borderRadius:'6px',color:'white',fontSize:'14px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"name\",children:\"Sort by Name\"}),/*#__PURE__*/_jsx(\"option\",{value:\"type\",children:\"Sort by Type\"}),/*#__PURE__*/_jsx(\"option\",{value:\"set\",children:\"Sort by Set\"}),/*#__PURE__*/_jsx(\"option\",{value:\"date\",children:\"Sort by Date Added\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewMode(viewMode==='grid'?'list':'grid'),style:{padding:'8px 12px',background:'rgba(74, 144, 226, 0.2)',border:'1px solid #4a90e2',color:'#4a90e2',borderRadius:'6px',cursor:'pointer',fontSize:'14px'},children:viewMode==='grid'?'ðŸ“‹ List View':'ðŸ”² Grid View'}),/*#__PURE__*/_jsx(\"button\",{onClick:exportToMoxfield,style:{padding:'8px 12px',background:'rgba(34, 197, 94, 0.2)',border:'1px solid #22c55e',color:'#22c55e',borderRadius:'6px',cursor:'pointer',fontSize:'14px'},children:\"\\uD83D\\uDCE4 Export Collection\"})]}),filteredAndSortedCards.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'60px 20px',background:'rgba(255, 255, 255, 0.02)',borderRadius:'12px',border:'1px dashed rgba(255, 255, 255, 0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'16px'},children:\"\\uD83C\\uDCCF\"}),/*#__PURE__*/_jsx(\"h3\",{style:{color:'#e2e8f0',marginBottom:'8px'},children:searchTerm?'No matching cards found':'No Cards in Collection'}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#94a3b8'},children:searchTerm?'Try a different search term':'Start scanning cards to build your collection'})]}):/*#__PURE__*/_jsx(\"div\",{style:{display:viewMode==='grid'?'grid':'block',gridTemplateColumns:viewMode==='grid'?'repeat(auto-fill, minmax(280px, 1fr))':'1fr',gap:'16px'},children:filteredAndSortedCards.map((card,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255, 255, 255, 0.05)',padding:'16px',borderRadius:'8px',border:'1px solid rgba(255, 255, 255, 0.1)',display:viewMode==='list'?'flex':'block',alignItems:viewMode==='list'?'center':'stretch',gap:viewMode==='list'?'16px':'0'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:viewMode==='list'?'1':'auto'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{color:'#4a90e2',marginBottom:'8px',fontSize:'16px'},children:card.cardName}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'13px',color:'#94a3b8',marginBottom:'8px'},children:[card.cardType&&/*#__PURE__*/_jsxs(\"div\",{children:[\"Type: \",card.cardType]}),card.setInfo&&/*#__PURE__*/_jsxs(\"div\",{children:[\"Set: \",card.setInfo]}),card.scannedAt&&/*#__PURE__*/_jsxs(\"div\",{children:[\"Added: \",card.scannedAt]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',marginTop:viewMode==='grid'?'12px':'0'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onOpenScryfall(card),style:{padding:'6px 12px',background:'rgba(74, 144, 226, 0.2)',border:'1px solid #4a90e2',color:'#4a90e2',borderRadius:'4px',cursor:'pointer',fontSize:'12px'},children:\"\\uD83D\\uDD17 Scryfall\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onRemoveCard(card.id),style:{padding:'6px 12px',background:'rgba(220, 53, 69, 0.2)',border:'1px solid #dc3545',color:'#dc3545',borderRadius:'4px',cursor:'pointer',fontSize:'12px'},children:\"\\uD83D\\uDDD1\\uFE0F Remove\"})]})]},card.id||index))})]});};// ðŸ”¥ IMPROVED Smart Cooldown System with Better Debugging\nclass MTGScannerCooldown{constructor(){this.lastDetectedCard=null;this.lastDetectionTime=0;this.lastApiCall=0;this.consecutiveDetections=0;this.isEditionSelectorOpen=false;this.detectionBuffer=[];// ðŸ”¥ ADJUSTED Cooldown periods for better user experience\nthis.SAME_CARD_COOLDOWN=12000;// 12 seconds for same card\nthis.MIN_API_INTERVAL=3000;// 3 seconds between API calls\nthis.DETECTION_STABILITY=2;// Need 2 consistent detections (was 3)\nthis.MAX_CONSECUTIVE=3;// Max consecutive before pause (was 2)\nthis.LONG_PAUSE_DURATION=20000;// 20 second pause (was 30)\nthis.isLongPauseActive=false;this.longPauseStartTime=0;}shouldScan(){let cardName=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;const now=Date.now();console.log(\"\\uD83D\\uDD0D COOLDOWN CHECK for \\\"\".concat(cardName,\"\\\" at \").concat(new Date(now).toLocaleTimeString()));// 1. Don't scan if edition selector is open\nif(this.isEditionSelectorOpen){console.log(\"ðŸš« BLOCKED: Edition selector open\");return false;}// 2. Check long pause\nif(this.isLongPauseActive){const pauseRemaining=this.LONG_PAUSE_DURATION-(now-this.longPauseStartTime);if(pauseRemaining>0){console.log(\"\\uD83D\\uDEAB BLOCKED: Long pause active (\".concat(Math.ceil(pauseRemaining/1000),\"s remaining)\"));return false;}else{this.isLongPauseActive=false;this.consecutiveDetections=0;console.log(\"âœ… Long pause ended, scanning can resume\");}}// 3. Enforce minimum API interval\nif(now-this.lastApiCall<this.MIN_API_INTERVAL){const waitTime=this.MIN_API_INTERVAL-(now-this.lastApiCall);console.log(\"\\uD83D\\uDEAB BLOCKED: API cooldown (\".concat(Math.ceil(waitTime/1000),\"s remaining)\"));return false;}// 4. Same card cooldown\nif(cardName&&cardName===this.lastDetectedCard){const timeSinceLastDetection=now-this.lastDetectionTime;if(timeSinceLastDetection<this.SAME_CARD_COOLDOWN){const waitTime=this.SAME_CARD_COOLDOWN-timeSinceLastDetection;console.log(\"\\uD83D\\uDEAB BLOCKED: Same card \\\"\".concat(cardName,\"\\\" cooldown (\").concat(Math.ceil(waitTime/1000),\"s remaining)\"));return false;}}console.log(\"âœ… COOLDOWN PASSED - can scan\");return true;}addDetection(cardName,confidence){const now=Date.now();this.detectionBuffer.push({cardName,confidence,timestamp:now});// Keep only recent detections (last 8 seconds)\nthis.detectionBuffer=this.detectionBuffer.filter(detection=>now-detection.timestamp<8000);const recentSameCard=this.detectionBuffer.filter(detection=>detection.cardName===cardName);const isStable=recentSameCard.length>=this.DETECTION_STABILITY;console.log(\"\\uD83D\\uDCCA STABILITY CHECK: \".concat(recentSameCard.length,\"/\").concat(this.DETECTION_STABILITY,\" for \\\"\").concat(cardName,\"\\\" - \").concat(isStable?'STABLE':'NOT STABLE'));return isStable;}recordDetection(cardName){const now=Date.now();if(cardName===this.lastDetectedCard){this.consecutiveDetections++;}else{this.consecutiveDetections=1;this.lastDetectedCard=cardName;}this.lastDetectionTime=now;this.lastApiCall=now;this.detectionBuffer=[];console.log(\"\\u2705 DETECTION RECORDED: \\\"\".concat(cardName,\"\\\" (consecutive: \").concat(this.consecutiveDetections,\")\"));if(this.consecutiveDetections>=this.MAX_CONSECUTIVE){this.isLongPauseActive=true;this.longPauseStartTime=now;console.log(\"\\uD83D\\uDED1 LONG PAUSE ACTIVATED (\".concat(this.MAX_CONSECUTIVE,\" consecutive detections)\"));}}resetCooldowns(){console.log(\"ðŸ”„ COOLDOWNS RESET\");this.consecutiveDetections=0;this.lastDetectedCard=null;this.lastDetectionTime=0;this.detectionBuffer=[];this.isLongPauseActive=false;this.longPauseStartTime=0;}setEditionSelectorOpen(isOpen){this.isEditionSelectorOpen=isOpen;console.log(\"\\uD83C\\uDFAD Edition selector \".concat(isOpen?'OPENED':'CLOSED'));}getCooldownStatus(){const now=Date.now();let longPauseRemaining=0;if(this.isLongPauseActive){longPauseRemaining=Math.max(0,this.LONG_PAUSE_DURATION-(now-this.longPauseStartTime));}return{sameCardCooldown:this.lastDetectedCard?Math.max(0,this.SAME_CARD_COOLDOWN-(now-this.lastDetectionTime)):0,apiCooldown:Math.max(0,this.MIN_API_INTERVAL-(now-this.lastApiCall)),consecutiveDetections:this.consecutiveDetections,longPauseRemaining,isEditionSelectorOpen:this.isEditionSelectorOpen,canScan:this.shouldScan(this.lastDetectedCard),detectionBufferSize:this.detectionBuffer.length,stabilityRequired:this.DETECTION_STABILITY};}}// ðŸ”¥ MAIN SCANNER COMPONENT\nconst Scanner=()=>{// Core scanner state\nconst[isScanning,setIsScanning]=useState(false);const[scanResult,setScanResult]=useState(null);const[cameraStatus,setCameraStatus]=useState('initializing');const[currentCard,setCurrentCard]=useState(null);const[scanMode,setScanMode]=useState('continuous');// Smart scanning state\nconst[continuousCount,setContinuousCount]=useState(0);const[showContinueDialog,setShowContinueDialog]=useState(false);const[autoSaveEnabled]=useState(true);// ðŸ”¥ Cooldown system state\nconst[cooldownStatus,setCooldownStatus]=useState({});// UI state\nconst[activeTab,setActiveTab]=useState('scanner');const[scanHistory,setScanHistory]=useState([]);const[isUIVisible,setIsUIVisible]=useState(true);const[savedCards,setSavedCards]=useState([]);// Edition selection state\nconst[showEditionSelector,setShowEditionSelector]=useState(false);const[availableEditions,setAvailableEditions]=useState([]);const[pendingCardData,setPendingCardData]=useState(null);const[pendingScanMode,setPendingScanMode]=useState(null);const[scanningPausedForSelection,setScanningPausedForSelection]=useState(false);// AI Learning for edition preferences\nconst[editionPreferences,setEditionPreferences]=useState({});// Collection limits and premium features\nconst[isPremiumUser,setIsPremiumUser]=useState(false);const[showPaywallModal,setShowPaywallModal]=useState(false);const FREE_COLLECTION_LIMIT=100;// Camera state\nconst[cameraError,setCameraError]=useState(null);const[cameraRetryCount,setCameraRetryCount]=useState(0);const[cameraInitializationComplete,setCameraInitializationComplete]=useState(false);const[availableCameras,setAvailableCameras]=useState([]);const[selectedCameraId,setSelectedCameraId]=useState(null);// Refs\nconst videoRef=useRef(null);const scanIntervalRef=useRef(null);const visionServiceRef=useRef(null);const cameraStreamRef=useRef(null);const initializationPromiseRef=useRef(null);// ðŸ”¥ Cooldown system ref\nconst cooldownSystemRef=useRef(new MTGScannerCooldown());// Initialize services and camera\nuseEffect(()=>{console.log('ðŸ”§ Component mounting - initializing services...');initializeServices();loadSavedData();if(!initializationPromiseRef.current){console.log('ðŸš€ Starting camera initialization...');initializationPromiseRef.current=enumerateCameras().then(()=>setupCamera());}// Update cooldown status periodically\nconst cooldownUpdateInterval=setInterval(()=>{setCooldownStatus(cooldownSystemRef.current.getCooldownStatus());},500);// More frequent updates for better debugging\nreturn()=>{console.log('ðŸ§¹ Component unmounting - cleaning up...');clearInterval(cooldownUpdateInterval);cleanup();};},[]);// Handle tab switching\nuseEffect(()=>{console.log(\"\\uD83C\\uDFAF Tab switched to: \".concat(activeTab));if(activeTab==='scanner'&&cameraStreamRef.current&&cameraStreamRef.current.active){if(videoRef.current&&!videoRef.current.srcObject){console.log('ðŸ“· Reconnecting video element to persistent stream...');videoRef.current.srcObject=cameraStreamRef.current;videoRef.current.play();}}if(activeTab!=='scanner'&&isScanning){console.log('â¸ï¸ Pausing scanning - left scanner tab');stopScanning();}},[activeTab,isScanning]);const initializeServices=()=>{console.log('ðŸ”§ Initializing MTG Scanner Pro...');try{visionServiceRef.current=new ClaudeVisionService();console.log('âœ… Vision Service initialized successfully');}catch(error){console.error('âŒ Service initialization failed:',error);}};const loadSavedData=()=>{try{const saved=localStorage.getItem('mtg_saved_cards');if(saved){setSavedCards(JSON.parse(saved));console.log('ðŸ“ Loaded saved cards from storage');}const preferences=localStorage.getItem('mtg_edition_preferences');if(preferences){setEditionPreferences(JSON.parse(preferences));console.log('ðŸ§  Loaded edition preferences');}const premiumStatus=localStorage.getItem('mtg_premium_status');if(premiumStatus==='true'){setIsPremiumUser(true);console.log('ðŸ’Ž Premium user status loaded');}}catch(error){console.error('âŒ Failed to load saved data:',error);}};const enumerateCameras=async()=>{try{const devices=await navigator.mediaDevices.enumerateDevices();const videoDevices=devices.filter(device=>device.kind==='videoinput');console.log('ðŸ“· Available cameras:',videoDevices.length);setAvailableCameras(videoDevices);// Auto-select best camera\nconst logitechCamera=videoDevices.find(device=>device.label.toLowerCase().includes('logitech')||device.label.toLowerCase().includes('c920'));if(logitechCamera){setSelectedCameraId(logitechCamera.deviceId);console.log('âœ… Auto-selected Logitech camera');}else if(videoDevices.length>0){setSelectedCameraId(videoDevices[0].deviceId);console.log('âœ… Auto-selected first available camera');}}catch(error){console.error('âŒ Failed to enumerate cameras:',error);}};const setupCamera=async function(){let deviceId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;console.log('ðŸŽ¥ Setting up camera...');setCameraStatus('requesting');setCameraError(null);try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){throw new Error('Camera API not supported in this browser');}if(cameraStreamRef.current&&cameraStreamRef.current.active){console.log('ðŸ“· Camera stream already active, reusing...');if(videoRef.current&&!videoRef.current.srcObject){videoRef.current.srcObject=cameraStreamRef.current;videoRef.current.play();}setCameraStatus('ready');setCameraInitializationComplete(true);return;}const useDeviceId=deviceId||selectedCameraId;let constraints;if(useDeviceId){constraints={video:{deviceId:{exact:useDeviceId},width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}},audio:false};}else{constraints={video:{width:{ideal:1280,min:320},height:{ideal:720,min:240},facingMode:{ideal:'environment'},frameRate:{ideal:30}},audio:false};}const stream=await navigator.mediaDevices.getUserMedia(constraints);cameraStreamRef.current=stream;setCameraInitializationComplete(true);if(videoRef.current){videoRef.current.srcObject=stream;videoRef.current.onloadedmetadata=()=>{videoRef.current.play();setCameraStatus('ready');setCameraError(null);setCameraRetryCount(0);console.log('âœ… Camera ready:',\"\".concat(videoRef.current.videoWidth,\"x\").concat(videoRef.current.videoHeight));showProfessionalToast('âœ… Camera ready!','success');};}}catch(error){console.error('âŒ Camera setup failed:',error);setCameraStatus('error');handleCameraError(error);}};const handleCameraError=error=>{let errorMessage='';let errorAction='';let canRetry=false;switch(error.name){case'NotAllowedError':errorMessage='Camera permission denied';errorAction='Please allow camera access and try again';canRetry=true;break;case'NotFoundError':errorMessage='No camera found';errorAction='Please connect a camera';canRetry=true;break;case'NotReadableError':errorMessage='Camera is busy';errorAction='Close other apps using the camera';canRetry=true;break;default:errorMessage=error.message||'Camera error';errorAction='Please check your camera and try again';canRetry=true;}setCameraError({message:errorMessage,action:errorAction,canRetry});if(canRetry&&cameraRetryCount<2&&error.name!=='NotAllowedError'){const retryDelay=(cameraRetryCount+1)*2000;console.log(\"\\uD83D\\uDD04 Auto-retrying camera setup in \".concat(retryDelay/1000,\"s\"));setTimeout(()=>{setCameraRetryCount(prev=>prev+1);setupCamera();},retryDelay);}};// ðŸ”¥ IMPROVED scanning with better cooldown integration\nconst startScanning=()=>{if(!visionServiceRef.current||cameraStatus!=='ready'){console.log('âš ï¸ Scanner not ready');if(cameraStatus==='error'){showProfessionalToast('âŒ Camera not ready. Please fix camera issues first.','error');}return;}console.log(\"\\u25B6\\uFE0F Starting MTG Scanner - \".concat(scanMode,\" mode...\"));setIsScanning(true);setScanningPausedForSelection(false);// Reset cooldowns when starting\ncooldownSystemRef.current.resetCooldowns();setCooldownStatus(cooldownSystemRef.current.getCooldownStatus());if(scanMode==='continuous'){setContinuousCount(0);}// ðŸ”¥ IMPROVED scanning interval\nscanIntervalRef.current=setInterval(async()=>{try{const currentCardName=currentCard===null||currentCard===void 0?void 0:currentCard.cardName;// ðŸ”¥ Check cooldown system first\nif(!cooldownSystemRef.current.shouldScan(currentCardName)){setCooldownStatus(cooldownSystemRef.current.getCooldownStatus());return;// Skip this frame\n}// Check if edition selector is open\nif(scanningPausedForSelection||showEditionSelector){console.log('â¸ï¸ Scanning paused for edition selection');cooldownSystemRef.current.setEditionSelectorOpen(true);return;}else{cooldownSystemRef.current.setEditionSelectorOpen(false);}console.log(\"ðŸ”„ Processing frame for MTG card...\");// Call vision service\nconst result=await visionServiceRef.current.processVideoFrame(videoRef.current);if(result&&result.hasCard&&result.confidence>=85){console.log(\"\\uD83C\\uDFAF High-confidence detection: \".concat(result.cardName,\" (\").concat(result.confidence,\"%)\"));// Check stability\nconst isStable=cooldownSystemRef.current.addDetection(result.cardName,result.confidence);if(isStable){console.log('âœ… Card detection is STABLE, processing...');// Record detection\ncooldownSystemRef.current.recordDetection(result.cardName);setCooldownStatus(cooldownSystemRef.current.getCooldownStatus());// Stop scanning in single mode\nif(scanMode==='single'){stopScanning();}// Handle card detection\nawait handleCardDetection(result);}else{console.log('â³ Card detection not stable yet...');}}else if(result&&!result.hasCard){setScanResult({hasCard:false,message:result.message||'No MTG card detected'});setCurrentCard(null);}// Update cooldown status\nsetCooldownStatus(cooldownSystemRef.current.getCooldownStatus());}catch(error){console.error('âŒ Scanning error:',error);setScanResult({hasCard:false,message:'Scanner error - please try again'});}},scanMode==='single'?1500:2500);// Adjusted intervals\n};const handleCardDetection=async detectedCard=>{try{console.log('ðŸŽ­ Checking for multiple editions of:',detectedCard.cardName);const cardName=detectedCard.cardName.trim();const searchQuery=\"!\\\"\".concat(cardName,\"\\\"\");const encodedQuery=encodeURIComponent(searchQuery);const editionsResponse=await fetch(\"https://api.scryfall.com/cards/search?q=\".concat(encodedQuery,\"&unique=prints&order=released&dir=desc\"));if(editionsResponse.ok){const editionsData=await editionsResponse.json();const editions=editionsData.data||[];const exactMatches=editions.filter(card=>{const cardNameNormalized=card.name.toLowerCase().trim();const searchNameNormalized=cardName.toLowerCase().trim();return cardNameNormalized===searchNameNormalized;});console.log(\"\\uD83C\\uDFAF Found \".concat(exactMatches.length,\" exact matches for \\\"\").concat(cardName,\"\\\"\"));if(exactMatches.length>1){// Show edition selector\nif(cooldownSystemRef.current.shouldScan()){console.log(\"\\uD83C\\uDFAD Multiple editions found - showing selector\");setScanningPausedForSelection(true);cooldownSystemRef.current.setEditionSelectorOpen(true);const sortedEditions=sortEditionsByPreference(cardName,exactMatches);setPendingCardData(detectedCard);setPendingScanMode(scanMode);setAvailableEditions(sortedEditions);setShowEditionSelector(true);setScanResult(null);setCurrentCard(null);return;}else{console.log(\"\\uD83D\\uDD04 Multiple editions found but in cooldown, using first edition\");const enhancedCard=enhanceCardWithScryfall(detectedCard,exactMatches[0]);displayCard(enhancedCard);}}else if(exactMatches.length===1){console.log(\"\\u2705 Single edition found\");const enhancedCard=enhanceCardWithScryfall(detectedCard,exactMatches[0]);displayCard(enhancedCard);if(scanMode==='continuous'&&autoSaveEnabled){const saved=await saveCardToCollection(enhancedCard);if(saved){console.log(\"\\uD83D\\uDCBE AUTO-SAVED: \".concat(enhancedCard.cardName));handleContinuousCounterAndLimit();}}}else{console.log('âš ï¸ No exact Scryfall matches found');displayCard(detectedCard);if(scanMode==='continuous'&&autoSaveEnabled){const saved=await saveCardToCollection(detectedCard);if(saved){console.log(\"\\uD83D\\uDCBE AUTO-SAVED: \".concat(detectedCard.cardName));handleContinuousCounterAndLimit();}}}}else{console.log('âŒ Scryfall API error');displayCard(detectedCard);}}catch(error){console.error('âŒ Edition lookup error:',error);displayCard(detectedCard);}};const sortEditionsByPreference=(cardName,editions)=>{const cardKey=cardName.toLowerCase().trim();const userPreference=editionPreferences[cardKey];if(userPreference){console.log(\"\\uD83E\\uDDE0 User previously preferred \".concat(userPreference,\" for \").concat(cardName));return editions.sort((a,b)=>{if(a.set===userPreference)return-1;if(b.set===userPreference)return 1;return 0;});}return editions;};const handleEditionSelected=async selectedEdition=>{if(pendingCardData&&selectedEdition){const enhancedCard=enhanceCardWithScryfall(pendingCardData,selectedEdition);displayCard(enhancedCard);console.log(\"\\u2705 User selected: \".concat(selectedEdition.set_name));learnEditionPreference(pendingCardData.cardName,selectedEdition);if(pendingScanMode==='continuous'&&autoSaveEnabled){const saved=await saveCardToCollection(enhancedCard);if(saved){console.log(\"\\uD83D\\uDCBE AUTO-SAVED: \".concat(enhancedCard.cardName));handleContinuousCounterAndLimit();}if(continuousCount<9){console.log('ðŸ”„ Resuming continuous scanning...');setTimeout(()=>{setScanningPausedForSelection(false);cooldownSystemRef.current.setEditionSelectorOpen(false);if(!isScanning){startScanning();}},2000);}}}// Close edition selector\nsetShowEditionSelector(false);setAvailableEditions([]);setPendingCardData(null);setPendingScanMode(null);setScanningPausedForSelection(false);cooldownSystemRef.current.setEditionSelectorOpen(false);setCooldownStatus(cooldownSystemRef.current.getCooldownStatus());};const handleEditionCancelled=async()=>{if(pendingCardData){displayCard(pendingCardData);if(pendingScanMode==='continuous'&&autoSaveEnabled){const saved=await saveCardToCollection(pendingCardData);if(saved){console.log(\"\\uD83D\\uDCBE AUTO-SAVED: \".concat(pendingCardData.cardName));handleContinuousCounterAndLimit();}if(continuousCount<9){console.log('ðŸ”„ Resuming continuous scanning...');setTimeout(()=>{setScanningPausedForSelection(false);cooldownSystemRef.current.setEditionSelectorOpen(false);if(!isScanning){startScanning();}},2000);}}}// Close edition selector\nsetShowEditionSelector(false);setAvailableEditions([]);setPendingCardData(null);setPendingScanMode(null);setScanningPausedForSelection(false);cooldownSystemRef.current.setEditionSelectorOpen(false);setCooldownStatus(cooldownSystemRef.current.getCooldownStatus());};const learnEditionPreference=(cardName,selectedEdition)=>{const cardKey=cardName.toLowerCase().trim();const newPreferences=_objectSpread(_objectSpread({},editionPreferences),{},{[cardKey]:selectedEdition.set});setEditionPreferences(newPreferences);localStorage.setItem('mtg_edition_preferences',JSON.stringify(newPreferences));console.log(\"\\uD83E\\uDDE0 AI Learning: Remembered \".concat(selectedEdition.set_name,\" preference for \").concat(cardName));};const handleContinuousCounterAndLimit=()=>{const newCount=continuousCount+1;setContinuousCount(newCount);if(newCount>=10){console.log('ðŸ›‘ CONTINUOUS MODE: 10-card limit reached');stopScanning();setShowContinueDialog(true);}};const handleContinueScanning=()=>{console.log('ðŸ”„ User chose to continue scanning...');setShowContinueDialog(false);setContinuousCount(0);cooldownSystemRef.current.resetCooldowns();startScanning();};const handleStopScanning=()=>{console.log('â¹ï¸ User chose to stop scanning');setShowContinueDialog(false);setContinuousCount(0);};const enhanceCardWithScryfall=(originalCard,scryfallCard)=>{var _scryfallCard$image_u,_scryfallCard$image_u2;return _objectSpread(_objectSpread({},originalCard),{},{cardType:scryfallCard.type_line,manaCost:scryfallCard.mana_cost,setInfo:scryfallCard.set_name,rarity:scryfallCard.rarity,scryfallId:scryfallCard.id,scryfallImageUrl:((_scryfallCard$image_u=scryfallCard.image_uris)===null||_scryfallCard$image_u===void 0?void 0:_scryfallCard$image_u.normal)||((_scryfallCard$image_u2=scryfallCard.image_uris)===null||_scryfallCard$image_u2===void 0?void 0:_scryfallCard$image_u2.large),scryfallUri:scryfallCard.scryfall_uri,prices:scryfallCard.prices,collectorNumber:scryfallCard.collector_number,releaseDate:scryfallCard.released_at,scryfallVerified:true,setCode:scryfallCard.set,colors:scryfallCard.colors});};const displayCard=card=>{setCurrentCard(card);setScanResult(card);setScanHistory(prev=>{const isDuplicate=prev.some(historyCard=>historyCard.cardName===card.cardName&&Math.abs(new Date(historyCard.timestamp)-new Date(card.timestamp))<5000);if(!isDuplicate){return[card,...prev.slice(0,19)];}return prev;});};const stopScanning=()=>{console.log('â¹ï¸ Stopping MTG Scanner...');setIsScanning(false);setScanningPausedForSelection(false);if(scanIntervalRef.current){clearInterval(scanIntervalRef.current);scanIntervalRef.current=null;}console.log('ðŸ“· Camera stream preserved');};const cleanup=()=>{console.log('ðŸ§¹ Cleaning up MTG Scanner...');stopScanning();if(cameraStreamRef.current){console.log('ðŸ“· Stopping camera stream...');cameraStreamRef.current.getTracks().forEach(track=>track.stop());cameraStreamRef.current=null;setCameraInitializationComplete(false);}if(videoRef.current&&videoRef.current.srcObject){const tracks=videoRef.current.srcObject.getTracks();tracks.forEach(track=>track.stop());videoRef.current.srcObject=null;}initializationPromiseRef.current=null;};const saveCardToCollection=async card=>{try{if(!isPremiumUser&&savedCards.length>=FREE_COLLECTION_LIMIT){console.log('ðŸš¨ Free collection limit reached');setShowPaywallModal(true);return false;}const cardWithId=_objectSpread(_objectSpread({},card),{},{id:Date.now()+Math.random(),addedAt:new Date().toISOString(),scannedAt:new Date().toLocaleString()});const updatedCards=[cardWithId,...savedCards];setSavedCards(updatedCards);localStorage.setItem('mtg_saved_cards',JSON.stringify(updatedCards));console.log('ðŸ’¾ Card saved to collection:',card.cardName);if(scanMode==='single'){setScanResult(prev=>_objectSpread(_objectSpread({},prev),{},{savedToCollection:true,message:\"\\u2705 \".concat(card.cardName,\" saved to collection!\")}));setTimeout(()=>{setScanResult(prev=>_objectSpread(_objectSpread({},prev),{},{savedToCollection:false,message:undefined}));},3000);}return true;}catch(error){console.error('âŒ Failed to save card:',error);setScanResult(prev=>_objectSpread(_objectSpread({},prev),{},{message:\"\\u274C Failed to save \".concat(card.cardName)}));return false;}};const handleUpgradeToPremium=()=>{console.log('ðŸ’Ž Initiating premium upgrade...');const paypalLink=\"https://www.paypal.com/paypalme/thediceyguy/9.99\";window.open(paypalLink,'_blank');setTimeout(()=>{setIsPremiumUser(true);localStorage.setItem('mtg_premium_status','true');setShowPaywallModal(false);showProfessionalToast('ðŸ’Ž Premium upgrade successful!','success');},5000);};const removeCardFromCollection=cardId=>{try{const updatedCards=savedCards.filter(card=>card.id!==cardId);setSavedCards(updatedCards);localStorage.setItem('mtg_saved_cards',JSON.stringify(updatedCards));console.log('ðŸ—‘ï¸ Card removed from collection');showProfessionalToast('ðŸ—‘ï¸ Card removed from collection','info');}catch(error){console.error('âŒ Failed to remove card:',error);}};const openCardInScryfall=card=>{if(card&&card.cardName){const searchUrl=\"https://scryfall.com/search?q=\".concat(encodeURIComponent(card.cardName));window.open(searchUrl,'_blank');console.log('ðŸ”— Opening Scryfall for:',card.cardName);}};const handleTabSwitch=newTab=>{console.log(\"\\uD83D\\uDD04 Switching to \".concat(newTab,\" tab\"));setActiveTab(newTab);if(newTab==='scanner'&&cameraStreamRef.current&&videoRef.current){setTimeout(()=>{if(!videoRef.current.srcObject){console.log('ðŸ“· Reconnecting video element...');videoRef.current.srcObject=cameraStreamRef.current;videoRef.current.play();}},100);}};const retryCameraSetup=()=>{console.log('ðŸ”„ Manual camera retry requested');setCameraRetryCount(0);setCameraError(null);setCameraInitializationComplete(false);initializationPromiseRef.current=null;setupCamera();};return/*#__PURE__*/_jsxs(\"div\",{className:\"mtg-scanner-pro\",style:{maxWidth:'1400px',margin:'0 auto',padding:'20px',minHeight:'100vh',background:'linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)',color:'#ffffff',fontFamily:'system-ui, -apple-system, sans-serif'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'20px 0',borderBottom:'2px solid #4a90e2',marginBottom:'20px',flexWrap:'wrap',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:'60px',height:'60px',background:'linear-gradient(45deg, #4a90e2, #64b5f6)',borderRadius:'12px',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',fontWeight:'bold',fontSize:'12px',textAlign:'center',lineHeight:'1.1'},children:[\"MTG\",/*#__PURE__*/_jsx(\"br\",{}),\"SCAN\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'2rem',background:'linear-gradient(45deg, #4a90e2, #64b5f6)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',backgroundClip:'text',marginBottom:'5px'},children:\"MTG Scanner Pro\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'0.9rem',color:'#b0bec5'},children:\"\\uD83D\\uDD25 Smart Cooldown System \\u2022 Professional Grade\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'15px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(74, 144, 226, 0.1)',padding:'8px 12px',borderRadius:'20px',border:'1px solid rgba(74, 144, 226, 0.3)',fontSize:'0.85rem'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#94a3b8'},children:\"Accuracy: \"}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#4a90e2',fontWeight:'bold'},children:\"98%\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(74, 144, 226, 0.1)',padding:'8px 12px',borderRadius:'20px',border:'1px solid rgba(74, 144, 226, 0.3)',fontSize:'0.85rem'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#94a3b8'},children:\"Scanned: \"}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#4a90e2',fontWeight:'bold'},children:scanHistory.length})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(74, 144, 226, 0.1)',padding:'8px 12px',borderRadius:'20px',border:'1px solid rgba(74, 144, 226, 0.3)',fontSize:'0.85rem'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#94a3b8'},children:\"Collection: \"}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#4a90e2',fontWeight:'bold'},children:savedCards.length})]})]})]}),/*#__PURE__*/_jsx(ProfessionalTabs,{activeTab:activeTab,onTabChange:handleTabSwitch,savedCards:savedCards}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'24px'},children:[activeTab==='scanner'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255, 255, 255, 0.05)',backdropFilter:'blur(10px)',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'15px',padding:'24px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,style:{width:'100%',maxWidth:'640px',height:'auto',borderRadius:'12px',border:'2px solid #4a90e2',background:'#000'},autoPlay:true,playsInline:true,muted:true}),/*#__PURE__*/_jsx(ProfessionalCooldownStatus,{cooldownStatus:cooldownStatus,isVisible:true}),cameraError&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'50%',left:'50%',transform:'translate(-50%, -50%)',background:'rgba(0,0,0,0.9)',color:'white',padding:'20px',borderRadius:'12px',textAlign:'center',border:'2px solid #dc3545'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCF9 Camera Issue\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:cameraError.message})}),/*#__PURE__*/_jsx(\"p\",{children:cameraError.action}),cameraError.canRetry&&/*#__PURE__*/_jsx(\"button\",{onClick:retryCameraSetup,style:{padding:'10px 20px',background:'#4a90e2',border:'none',color:'white',borderRadius:'6px',cursor:'pointer',marginTop:'10px'},children:\"\\uD83D\\uDD04 Try Again\"})]}),isScanning&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'10px',left:'10px',background:'rgba(74, 144, 226, 0.8)',color:'white',padding:'8px 12px',borderRadius:'6px',fontSize:'14px',fontWeight:'600'},children:scanningPausedForSelection?'â¸ï¸ Paused for edition selection':'ðŸ” Scanning for MTG cards...'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'16px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#b0bec5',marginBottom:'8px',display:'block'},children:\"\\u2699\\uFE0F Scan Mode:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setScanMode('continuous'),disabled:isScanning,style:{flex:1,padding:'12px',border:scanMode==='continuous'?'2px solid #4a90e2':'1px solid #666',background:scanMode==='continuous'?'#4a90e2':'rgba(74, 144, 226, 0.1)',color:'white',borderRadius:'8px',cursor:isScanning?'not-allowed':'pointer',fontSize:'13px'},children:\"\\uD83D\\uDD25 Smart Continuous\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setScanMode('single'),disabled:isScanning,style:{flex:1,padding:'12px',border:scanMode==='single'?'2px solid #4a90e2':'1px solid #666',background:scanMode==='single'?'#4a90e2':'rgba(74, 144, 226, 0.1)',color:'white',borderRadius:'8px',cursor:isScanning?'not-allowed':'pointer',fontSize:'13px'},children:\"\\uD83D\\uDCF7 Smart Single\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:isScanning?stopScanning:startScanning,disabled:cameraStatus!=='ready',style:{padding:'16px 24px',border:'none',background:isScanning?'linear-gradient(135deg, #dc3545, #c82333)':'linear-gradient(135deg, #4a90e2, #64b5f6)',color:'white',borderRadius:'8px',cursor:cameraStatus!=='ready'?'not-allowed':'pointer',fontSize:'16px',fontWeight:'600',opacity:cameraStatus!=='ready'?0.6:1},children:isScanning?'â¹ï¸ Stop Scanning':\"\\uD83D\\uDD25 Start \".concat(scanMode,\" Scan\")}),cooldownStatus&&!cooldownStatus.canScan&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(251, 191, 36, 0.1)',border:'1px solid rgba(251, 191, 36, 0.3)',borderRadius:'8px',padding:'12px',textAlign:'center',fontSize:'13px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#fbbf24',fontWeight:'600'},children:\"\\u23F3 Smart Cooldown Active\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#94a3b8',fontSize:'11px',marginTop:'4px'},children:\"Preventing API spam for stable detection\"})]})]})]}),isUIVisible&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255, 255, 255, 0.05)',backdropFilter:'blur(10px)',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'15px',padding:'24px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'#4a90e2',marginBottom:'20px'},children:\"\\uD83C\\uDFAF Card Recognition\"}),currentCard?/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(34, 197, 94, 0.1)',border:'1px solid rgba(34, 197, 94, 0.3)',borderRadius:'12px',padding:'20px',marginBottom:'16px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'20px',fontWeight:'bold',color:'#22c55e',marginBottom:'12px'},children:currentCard.cardName}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'left',fontSize:'14px',marginBottom:'12px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'6px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#94a3b8'},children:\"Type:\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:'white',fontWeight:'600'},children:currentCard.cardType||'Unknown'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'6px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#94a3b8'},children:\"Confidence:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'white',fontWeight:'600'},children:[currentCard.confidence,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'6px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#94a3b8'},children:\"Method:\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:'white',fontWeight:'600'},children:currentCard.scryfallVerified?'âœ… Scryfall Verified':'ðŸ§  AI Detection'})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'8px',background:'rgba(255, 255, 255, 0.1)',borderRadius:'4px',overflow:'hidden',marginBottom:'16px'},children:/*#__PURE__*/_jsx(\"div\",{style:{height:'100%',background:'linear-gradient(90deg, #22c55e, #34d399)',width:\"\".concat(currentCard.confidence,\"%\"),borderRadius:'4px',transition:'width 0.3s ease'}})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>saveCardToCollection(currentCard),style:{padding:'8px 16px',background:'rgba(74, 144, 226, 0.2)',border:'1px solid #4a90e2',color:'#4a90e2',borderRadius:'6px',cursor:'pointer',fontSize:'13px'},children:\"\\uD83D\\uDCBE Save to Collection\"}),currentCard.scryfallUri&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.open(currentCard.scryfallUri,'_blank'),style:{padding:'8px 16px',background:'rgba(34, 197, 94, 0.2)',border:'1px solid #22c55e',color:'#22c55e',borderRadius:'6px',cursor:'pointer',fontSize:'13px'},children:\"\\uD83D\\uDD17 View on Scryfall\"})]})]}):/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'40px 20px'},children:/*#__PURE__*/_jsx(\"div\",{style:{color:'#94a3b8',fontStyle:'italic'},children:scanResult&&!scanResult.hasCard?scanResult.message||'No MTG card detected':'No card detected. Position an MTG card in the camera view.'})}),scanHistory.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'24px'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{color:'#4a90e2',marginBottom:'16px',fontSize:'16px'},children:\"\\uD83D\\uDCCA Recent Scans\"}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:'200px',overflowY:'auto'},children:scanHistory.map((card,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:'12px',margin:'8px 0',background:'rgba(74, 144, 226, 0.1)',borderRadius:'8px',fontSize:'13px',display:'flex',justifyContent:'space-between',alignItems:'center',border:'1px solid rgba(74, 144, 226, 0.2)'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'600'},children:card.cardName}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#64b5f6',fontWeight:'700'},children:[card.confidence,\"%\"]})]},index))})]})]})]}),activeTab==='deck'&&/*#__PURE__*/_jsx(\"div\",{style:{background:'rgba(255, 255, 255, 0.05)',backdropFilter:'blur(10px)',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'15px',padding:'32px',width:'100%'},children:/*#__PURE__*/_jsx(DeckManager,{savedCards:savedCards,onRemoveCard:removeCardFromCollection,onOpenScryfall:openCardInScryfall})}),activeTab==='knowledge'&&/*#__PURE__*/_jsx(\"div\",{style:{background:'rgba(255, 255, 255, 0.05)',backdropFilter:'blur(10px)',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'15px',padding:'32px',width:'100%'},children:/*#__PURE__*/_jsx(MTGKnowledgeBase,{currentCard:currentCard,savedCards:savedCards})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255, 255, 255, 0.05)',backdropFilter:'blur(10px)',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'15px',padding:'16px',marginTop:'24px',display:'flex',justifyContent:'space-between',alignItems:'center',flexWrap:'wrap',gap:'16px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:'16px',flexWrap:'wrap'},children:scanHistory.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'14px'},children:[\"\\uD83D\\uDCCA Scanned: \",scanHistory.length]}),currentCard&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'14px'},children:[\"\\uD83C\\uDFAF Last: \",currentCard.cardName,\" (\",currentCard.confidence,\"%)\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'16px',alignItems:'center',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold',color:'#4a90e2'},children:\"MTG Scanner Pro\"}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'14px'},children:[\"\\uD83D\\uDD25 Cooldown: \",cooldownStatus.canScan?'Ready':'Active']}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'14px'},children:[\"\\uD83D\\uDCF7 Camera: \",cameraStatus==='ready'?'Ready âœ…':'Initializing â³']}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'14px'},children:\"\\uD83E\\uDDE0 AI: Gemini Vision\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'14px'},children:isPremiumUser?'ðŸ’Ž Premium':'ðŸ†“ Free'})]})]}),showEditionSelector&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',background:'rgba(0,0,0,0.9)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:10000},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f1419 100%)',border:'2px solid #4a90e2',borderRadius:'16px',padding:'32px',maxWidth:'500px',width:'90%',textAlign:'center',color:'white'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'#4a90e2',marginBottom:'20px'},children:\"\\uD83C\\uDFAD Multiple Editions Found\"}),/*#__PURE__*/_jsxs(\"p\",{style:{marginBottom:'20px',color:'#94a3b8'},children:[\"Choose the correct edition for \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#4a90e2'},children:pendingCardData===null||pendingCardData===void 0?void 0:pendingCardData.cardName}),\":\"]}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:'300px',overflowY:'auto',marginBottom:'20px'},children:availableEditions.map((edition,index)=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleEditionSelected(edition),style:{padding:'12px',margin:'8px 0',background:'rgba(74, 144, 226, 0.1)',border:'1px solid rgba(74, 144, 226, 0.3)',borderRadius:'8px',cursor:'pointer',textAlign:'left'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'600',marginBottom:'4px'},children:edition.set_name||edition.name}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#94a3b8'},children:[\"Set: \",(edition.set||'Unknown').toUpperCase(),\" \\u2022 \",edition.released_at||'Unknown date']})]},index))}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEditionCancelled,style:{padding:'12px 24px',background:'transparent',border:'1px solid #666',color:'#94a3b8',borderRadius:'8px',cursor:'pointer'},children:\"Skip Edition Selection\"})]})}),showPaywallModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',background:'rgba(0,0,0,0.9)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:10000},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#23272a',border:'2px solid #4a90e2',borderRadius:'16px',padding:'32px',maxWidth:'500px',width:'90%',textAlign:'center',color:'white'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDC8E Upgrade to Premium\"}),/*#__PURE__*/_jsx(\"div\",{style:{margin:'20px 0',fontSize:'18px'},children:/*#__PURE__*/_jsxs(\"p\",{style:{margin:'8px 0',lineHeight:'1.5'},children:[\"You've reached the \",/*#__PURE__*/_jsxs(\"strong\",{children:[FREE_COLLECTION_LIMIT,\" card limit\"]}),\" for free users!\"]})}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(74, 144, 226, 0.1)',padding:'20px',borderRadius:'10px',margin:'20px 0'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 15px 0',color:'#4a90e2'},children:\"Premium Features:\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{textAlign:'left',lineHeight:'1.8',margin:0,paddingLeft:'20px'},children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"\\uD83D\\uDD25 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Unlimited collection storage\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\uD83E\\uDDE0 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Advanced AI learning\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\uD83D\\uDCCA \",/*#__PURE__*/_jsx(\"strong\",{children:\"Collection analytics\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\uD83D\\uDCB0 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Price tracking & alerts\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\uD83C\\uDFAF \",/*#__PURE__*/_jsx(\"strong\",{children:\"Deck optimization tools\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u26A1 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Priority customer support\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'16px',justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleUpgradeToPremium,style:{padding:'12px 24px',border:'none',borderRadius:'8px',background:'linear-gradient(45deg, #4a90e2, #357abd)',color:'white',fontWeight:'bold',cursor:'pointer'},children:\"\\uD83D\\uDC8E Upgrade for $9.99/month\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPaywallModal(false),style:{padding:'12px 24px',border:'1px solid #666',borderRadius:'8px',background:'transparent',color:'white',cursor:'pointer'},children:\"Maybe Later\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px',paddingTop:'20px',borderTop:'1px solid #444',fontSize:'12px',color:'#ccc'},children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDCB3 Secure payment via PayPal\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDCE7 Payment to: thediceyguy@gmail.com\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDD12 Cancel anytime, no long-term commitment\"})]})]})}),showContinueDialog&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',background:'rgba(0,0,0,0.9)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:10000},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#23272a',border:'2px solid #4a90e2',borderRadius:'16px',padding:'32px',maxWidth:'500px',width:'90%',textAlign:'center',color:'white'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDD25 10 Cards Scanned!\"}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'8px 0',lineHeight:'1.5'},children:[\"You've successfully scanned \",/*#__PURE__*/_jsx(\"strong\",{children:\"10 cards\"}),\" with the smart cooldown system.\"]}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'8px 0',lineHeight:'1.5'},children:[\"AI learned \",/*#__PURE__*/_jsx(\"strong\",{children:Object.keys(editionPreferences).length}),\" edition preferences.\"]}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'8px 0',lineHeight:'1.5'},children:[\"Total saved to collection: \",/*#__PURE__*/_jsx(\"strong\",{children:savedCards.length}),\" cards\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'16px',justifyContent:'center',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleContinueScanning,style:{padding:'12px 24px',border:'none',borderRadius:'8px',background:'linear-gradient(45deg, #4a90e2, #357abd)',color:'white',fontWeight:'bold',cursor:'pointer'},children:\"\\uD83D\\uDD25 Continue Scanning\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleStopScanning,style:{padding:'12px 24px',border:'1px solid #666',borderRadius:'8px',background:'transparent',color:'white',cursor:'pointer'},children:\"\\u23F9\\uFE0F Stop & Review\"})]})]})})]});};export default Scanner;","map":{"version":3,"names":["React","useState","useRef","useEffect","ClaudeVisionService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProfessionalCooldownStatus","_ref","cooldownStatus","isVisible","style","position","top","right","background","color","padding","borderRadius","fontSize","fontFamily","border","minWidth","zIndex","children","fontWeight","marginBottom","textAlign","display","justifyContent","Math","ceil","apiCooldown","sameCardCooldown","consecutiveDetections","detectionBufferSize","stabilityRequired","longPauseRemaining","marginTop","canScan","ProfessionalTabs","_ref2","activeTab","onTabChange","savedCards","tabs","id","label","badge","length","gap","map","tab","onClick","flex","cursor","alignItems","showProfessionalToast","message","type","arguments","undefined","duration","existingToasts","document","querySelectorAll","forEach","toast","remove","createElement","className","cssText","concat","textContent","body","appendChild","setTimeout","parentNode","removeChild","MTGKnowledgeBase","_ref3","currentCard","activeSection","setActiveSection","getCollectionInsights","colorCount","typeCount","card","colors","Array","isArray","cardType","mainType","split","trim","totalCards","getRarityColor","rarity","common","uncommon","rare","mythic","toLowerCase","getColorSymbol","symbols","W","U","B","R","G","getColorName","names","getCardAnalysis","includes","insights","cardName","manaCost","setInfo","lineHeight","scryfallUri","window","open","Object","keys","entries","_ref4","count","_ref5","flexWrap","DeckManager","_ref6","onRemoveCard","onOpenScryfall","viewMode","setViewMode","searchTerm","setSearchTerm","sortBy","setSortBy","filteredAndSortedCards","filter","sort","a","b","localeCompare","Date","addedAt","exportToMoxfield","moxfieldFormat","join","blob","Blob","url","URL","createObjectURL","href","download","click","revokeObjectURL","placeholder","value","onChange","e","target","gridTemplateColumns","index","scannedAt","MTGScannerCooldown","constructor","lastDetectedCard","lastDetectionTime","lastApiCall","isEditionSelectorOpen","detectionBuffer","SAME_CARD_COOLDOWN","MIN_API_INTERVAL","DETECTION_STABILITY","MAX_CONSECUTIVE","LONG_PAUSE_DURATION","isLongPauseActive","longPauseStartTime","shouldScan","now","console","log","toLocaleTimeString","pauseRemaining","waitTime","timeSinceLastDetection","addDetection","confidence","push","timestamp","detection","recentSameCard","isStable","recordDetection","resetCooldowns","setEditionSelectorOpen","isOpen","getCooldownStatus","max","Scanner","isScanning","setIsScanning","scanResult","setScanResult","cameraStatus","setCameraStatus","setCurrentCard","scanMode","setScanMode","continuousCount","setContinuousCount","showContinueDialog","setShowContinueDialog","autoSaveEnabled","setCooldownStatus","setActiveTab","scanHistory","setScanHistory","isUIVisible","setIsUIVisible","setSavedCards","showEditionSelector","setShowEditionSelector","availableEditions","setAvailableEditions","pendingCardData","setPendingCardData","pendingScanMode","setPendingScanMode","scanningPausedForSelection","setScanningPausedForSelection","editionPreferences","setEditionPreferences","isPremiumUser","setIsPremiumUser","showPaywallModal","setShowPaywallModal","FREE_COLLECTION_LIMIT","cameraError","setCameraError","cameraRetryCount","setCameraRetryCount","cameraInitializationComplete","setCameraInitializationComplete","availableCameras","setAvailableCameras","selectedCameraId","setSelectedCameraId","videoRef","scanIntervalRef","visionServiceRef","cameraStreamRef","initializationPromiseRef","cooldownSystemRef","initializeServices","loadSavedData","current","enumerateCameras","then","setupCamera","cooldownUpdateInterval","setInterval","clearInterval","cleanup","active","srcObject","play","stopScanning","error","saved","localStorage","getItem","JSON","parse","preferences","premiumStatus","devices","navigator","mediaDevices","enumerateDevices","videoDevices","device","kind","logitechCamera","find","deviceId","getUserMedia","Error","useDeviceId","constraints","video","exact","width","ideal","height","frameRate","audio","min","facingMode","stream","onloadedmetadata","videoWidth","videoHeight","handleCameraError","errorMessage","errorAction","canRetry","name","action","retryDelay","prev","startScanning","currentCardName","result","processVideoFrame","hasCard","handleCardDetection","detectedCard","searchQuery","encodedQuery","encodeURIComponent","editionsResponse","fetch","ok","editionsData","json","editions","data","exactMatches","cardNameNormalized","searchNameNormalized","sortedEditions","sortEditionsByPreference","enhancedCard","enhanceCardWithScryfall","displayCard","saveCardToCollection","handleContinuousCounterAndLimit","cardKey","userPreference","set","handleEditionSelected","selectedEdition","set_name","learnEditionPreference","handleEditionCancelled","newPreferences","_objectSpread","setItem","stringify","newCount","handleContinueScanning","handleStopScanning","originalCard","scryfallCard","_scryfallCard$image_u","_scryfallCard$image_u2","type_line","mana_cost","scryfallId","scryfallImageUrl","image_uris","normal","large","scryfall_uri","prices","collectorNumber","collector_number","releaseDate","released_at","scryfallVerified","setCode","isDuplicate","some","historyCard","abs","slice","getTracks","track","stop","tracks","cardWithId","random","toISOString","toLocaleString","updatedCards","savedToCollection","handleUpgradeToPremium","paypalLink","removeCardFromCollection","cardId","openCardInScryfall","searchUrl","handleTabSwitch","newTab","retryCameraSetup","maxWidth","margin","minHeight","borderBottom","flexDirection","WebkitBackgroundClip","WebkitTextFillColor","backgroundClip","backdropFilter","ref","autoPlay","playsInline","muted","left","transform","disabled","opacity","overflow","transition","fontStyle","maxHeight","overflowY","edition","toUpperCase","paddingLeft","paddingTop","borderTop"],"sources":["C:/Users/kim-a/Documents/DiceyTeck/MTG Scanner BACKUP/src/Scanner.js"],"sourcesContent":["// Scanner.js - COMPLETE INTEGRATED VERSION with Working Cooldown & Knowledge Base\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport ClaudeVisionService from './ClaudeVisionService';\r\nimport './CardDisplay.css';\r\n\r\n// ðŸ”¥ INTEGRATED PROFESSIONAL COMPONENTS\r\nconst ProfessionalCooldownStatus = ({ cooldownStatus, isVisible }) => {\r\n    if (!isVisible || !cooldownStatus) return null;\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'absolute',\r\n            top: '10px',\r\n            right: '10px',\r\n            background: 'rgba(0,0,0,0.85)',\r\n            color: 'white',\r\n            padding: '12px',\r\n            borderRadius: '8px',\r\n            fontSize: '11px',\r\n            fontFamily: 'monospace',\r\n            border: '1px solid #4a90e2',\r\n            minWidth: '220px',\r\n            zIndex: 1000\r\n        }}>\r\n            <div style={{color: '#4a90e2', fontWeight: 'bold', marginBottom: '6px', textAlign: 'center'}}>\r\n                ðŸ”¥ COOLDOWN DEBUG STATUS\r\n            </div>\r\n            <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                <span>API:</span>\r\n                <span style={{color: '#64b5f6'}}>{Math.ceil(cooldownStatus.apiCooldown / 1000)}s</span>\r\n            </div>\r\n            <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                <span>Same Card:</span>\r\n                <span style={{color: '#64b5f6'}}>{Math.ceil(cooldownStatus.sameCardCooldown / 1000)}s</span>\r\n            </div>\r\n            <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                <span>Consecutive:</span>\r\n                <span style={{color: '#64b5f6'}}>{cooldownStatus.consecutiveDetections}/2</span>\r\n            </div>\r\n            <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                <span>Stability:</span>\r\n                <span style={{color: '#64b5f6'}}>{cooldownStatus.detectionBufferSize || 0}/{cooldownStatus.stabilityRequired || 3}</span>\r\n            </div>\r\n            {cooldownStatus.longPauseRemaining > 0 && (\r\n                <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                    <span>Long Pause:</span>\r\n                    <span style={{color: '#ffc107'}}>{Math.ceil(cooldownStatus.longPauseRemaining / 1000)}s</span>\r\n                </div>\r\n            )}\r\n            <div style={{\r\n                marginTop: '6px', \r\n                padding: '4px', \r\n                background: cooldownStatus.canScan ? 'rgba(40, 167, 69, 0.3)' : 'rgba(220, 53, 69, 0.3)',\r\n                borderRadius: '4px',\r\n                textAlign: 'center',\r\n                fontWeight: 'bold'\r\n            }}>\r\n                {cooldownStatus.canScan ? 'âœ… Ready' : 'â³ Cooldown'}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ProfessionalTabs = ({ activeTab, onTabChange, savedCards }) => {\r\n    const tabs = [\r\n        { id: 'scanner', label: 'ðŸ” Scanner', badge: null },\r\n        { id: 'deck', label: 'ðŸƒ Collection', badge: savedCards?.length || 0 },\r\n        { id: 'knowledge', label: 'ðŸ“š Knowledge', badge: null }\r\n    ];\r\n\r\n    return (\r\n        <div style={{\r\n            display: 'flex',\r\n            gap: '4px',\r\n            marginBottom: '20px',\r\n            background: 'rgba(255, 255, 255, 0.05)',\r\n            padding: '4px',\r\n            borderRadius: '12px',\r\n            border: '1px solid rgba(255, 255, 255, 0.1)'\r\n        }}>\r\n            {tabs.map(tab => (\r\n                <button\r\n                    key={tab.id}\r\n                    onClick={() => onTabChange(tab.id)}\r\n                    style={{\r\n                        flex: 1,\r\n                        padding: '12px 16px',\r\n                        border: 'none',\r\n                        background: activeTab === tab.id ? 'linear-gradient(45deg, #4a90e2, #64b5f6)' : 'transparent',\r\n                        color: activeTab === tab.id ? 'white' : '#94a3b8',\r\n                        borderRadius: '8px',\r\n                        cursor: 'pointer',\r\n                        fontSize: '14px',\r\n                        fontWeight: '600',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        gap: '8px'\r\n                    }}\r\n                >\r\n                    <span>{tab.label}</span>\r\n                    {tab.badge !== null && (\r\n                        <span style={{\r\n                            background: 'rgba(74, 144, 226, 0.2)',\r\n                            color: '#4a90e2',\r\n                            padding: '2px 6px',\r\n                            borderRadius: '10px',\r\n                            fontSize: '11px',\r\n                            fontWeight: '700'\r\n                        }}>\r\n                            {tab.badge}\r\n                        </span>\r\n                    )}\r\n                </button>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst showProfessionalToast = (message, type = 'info', duration = 3000) => {\r\n    const existingToasts = document.querySelectorAll('.toast-message');\r\n    existingToasts.forEach(toast => toast.remove());\r\n\r\n    const toast = document.createElement('div');\r\n    toast.className = 'toast-message';\r\n    toast.style.cssText = `\r\n        position: fixed;\r\n        top: 20px;\r\n        right: 20px;\r\n        background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#17a2b8'};\r\n        color: white;\r\n        padding: 12px 20px;\r\n        border-radius: 6px;\r\n        z-index: 10001;\r\n        font-weight: 500;\r\n        box-shadow: 0 4px 12px rgba(0,0,0,0.2);\r\n        max-width: 300px;\r\n    `;\r\n    toast.textContent = message;\r\n    \r\n    document.body.appendChild(toast);\r\n    \r\n    setTimeout(() => {\r\n        if (toast.parentNode) {\r\n            toast.parentNode.removeChild(toast);\r\n        }\r\n    }, duration);\r\n};\r\n\r\n// ðŸ”¥ INTEGRATED MTG KNOWLEDGE BASE COMPONENT\r\nconst MTGKnowledgeBase = ({ currentCard = null, savedCards = [] }) => {\r\n    const [activeSection, setActiveSection] = useState('current');\r\n\r\n    const getCollectionInsights = () => {\r\n        if (savedCards.length === 0) return null;\r\n        \r\n        const colorCount = {};\r\n        const typeCount = {};\r\n        \r\n        savedCards.forEach(card => {\r\n            if (card.colors && Array.isArray(card.colors)) {\r\n                card.colors.forEach(color => {\r\n                    colorCount[color] = (colorCount[color] || 0) + 1;\r\n                });\r\n            }\r\n            \r\n            if (card.cardType) {\r\n                const mainType = card.cardType.split('â€”')[0].trim();\r\n                typeCount[mainType] = (typeCount[mainType] || 0) + 1;\r\n            }\r\n        });\r\n\r\n        return { colorCount, typeCount, totalCards: savedCards.length };\r\n    };\r\n\r\n    const getRarityColor = (rarity) => {\r\n        const colors = {\r\n            common: '#1e1e1e',\r\n            uncommon: '#c0c0c0', \r\n            rare: '#ffd700',\r\n            mythic: '#ff8c00'\r\n        };\r\n        return colors[rarity?.toLowerCase()] || '#ffffff';\r\n    };\r\n\r\n    const getColorSymbol = (color) => {\r\n        const symbols = {\r\n            W: 'âšª', U: 'ðŸ”µ', B: 'âš«', R: 'ðŸ”´', G: 'ðŸŸ¢'\r\n        };\r\n        return symbols[color] || 'âšª';\r\n    };\r\n\r\n    const getColorName = (color) => {\r\n        const names = {\r\n            W: 'White', U: 'Blue', B: 'Black', R: 'Red', G: 'Green'\r\n        };\r\n        return names[color] || color;\r\n    };\r\n\r\n    const getCardAnalysis = (card) => {\r\n        if (!card.cardType) return 'Card type information not available.';\r\n        \r\n        const type = card.cardType.toLowerCase();\r\n        \r\n        if (type.includes('creature')) {\r\n            return 'This creature can attack and block. Consider its power, toughness, and any special abilities when building your deck.';\r\n        } else if (type.includes('instant')) {\r\n            return 'This instant can be played at any time you have priority, including during your opponent\\'s turn or in response to other spells.';\r\n        } else if (type.includes('sorcery')) {\r\n            return 'This sorcery can only be played during your main phases when the stack is empty and you have priority.';\r\n        } else if (type.includes('enchantment')) {\r\n            return 'This enchantment provides ongoing effects while it remains on the battlefield.';\r\n        } else if (type.includes('artifact')) {\r\n            return 'This artifact is colorless and can fit into any deck, but may be vulnerable to artifact removal.';\r\n        } else if (type.includes('land')) {\r\n            return 'This land can produce mana to cast your spells. Most decks play lands every turn.';\r\n        } else if (type.includes('planeswalker')) {\r\n            return 'This planeswalker is a powerful ally that can use loyalty abilities. Protect it from attacks!';\r\n        }\r\n        \r\n        return 'This card has a unique type. Check its rules text for specific interactions.';\r\n    };\r\n\r\n    const insights = getCollectionInsights();\r\n\r\n    return (\r\n        <div style={{ padding: '20px', color: 'white' }}>\r\n            <h2 style={{ color: '#4a90e2', marginBottom: '24px', display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                ðŸ“š MTG Knowledge Base\r\n            </h2>\r\n            \r\n            {/* Navigation */}\r\n            <div style={{ display: 'flex', gap: '8px', marginBottom: '24px' }}>\r\n                <button\r\n                    onClick={() => setActiveSection('current')}\r\n                    style={{\r\n                        padding: '10px 20px',\r\n                        background: activeSection === 'current' ? '#4a90e2' : 'rgba(74, 144, 226, 0.1)',\r\n                        color: activeSection === 'current' ? 'white' : '#4a90e2',\r\n                        border: '1px solid #4a90e2',\r\n                        borderRadius: '8px',\r\n                        cursor: 'pointer',\r\n                        fontSize: '14px',\r\n                        fontWeight: '600'\r\n                    }}\r\n                >\r\n                    ðŸ” Current Card\r\n                </button>\r\n                <button\r\n                    onClick={() => setActiveSection('collection')}\r\n                    style={{\r\n                        padding: '10px 20px',\r\n                        background: activeSection === 'collection' ? '#4a90e2' : 'rgba(74, 144, 226, 0.1)',\r\n                        color: activeSection === 'collection' ? 'white' : '#4a90e2',\r\n                        border: '1px solid #4a90e2',\r\n                        borderRadius: '8px',\r\n                        cursor: 'pointer',\r\n                        fontSize: '14px',\r\n                        fontWeight: '600'\r\n                    }}\r\n                >\r\n                    ðŸ“Š Collection\r\n                </button>\r\n                <button\r\n                    onClick={() => setActiveSection('rules')}\r\n                    style={{\r\n                        padding: '10px 20px',\r\n                        background: activeSection === 'rules' ? '#4a90e2' : 'rgba(74, 144, 226, 0.1)',\r\n                        color: activeSection === 'rules' ? 'white' : '#4a90e2',\r\n                        border: '1px solid #4a90e2',\r\n                        borderRadius: '8px',\r\n                        cursor: 'pointer',\r\n                        fontSize: '14px',\r\n                        fontWeight: '600'\r\n                    }}\r\n                >\r\n                    ðŸ“– Rules\r\n                </button>\r\n            </div>\r\n\r\n            {/* Current Card Analysis */}\r\n            {activeSection === 'current' && (\r\n                <div>\r\n                    {currentCard ? (\r\n                        <div style={{ \r\n                            background: 'rgba(74, 144, 226, 0.1)', \r\n                            padding: '24px', \r\n                            borderRadius: '12px',\r\n                            border: '1px solid rgba(74, 144, 226, 0.3)'\r\n                        }}>\r\n                            <h3 style={{ color: '#4a90e2', marginBottom: '16px' }}>\r\n                                ðŸŽ¯ Analyzing: {currentCard.cardName}\r\n                            </h3>\r\n                            \r\n                            <div style={{ display: 'grid', gap: '12px', marginBottom: '16px' }}>\r\n                                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                                    <span style={{ color: '#94a3b8' }}>Type:</span>\r\n                                    <span style={{ fontWeight: '600' }}>{currentCard.cardType || 'Unknown'}</span>\r\n                                </div>\r\n                                \r\n                                {currentCard.manaCost && (\r\n                                    <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                                        <span style={{ color: '#94a3b8' }}>Mana Cost:</span>\r\n                                        <span style={{ fontWeight: '600' }}>{currentCard.manaCost}</span>\r\n                                    </div>\r\n                                )}\r\n                                \r\n                                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                                    <span style={{ color: '#94a3b8' }}>Set:</span>\r\n                                    <span style={{ fontWeight: '600' }}>{currentCard.setInfo || 'Unknown'}</span>\r\n                                </div>\r\n                                \r\n                                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                                    <span style={{ color: '#94a3b8' }}>Rarity:</span>\r\n                                    <span style={{ fontWeight: '600', color: getRarityColor(currentCard.rarity) }}>\r\n                                        {currentCard.rarity || 'Unknown'}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div style={{ \r\n                                background: 'rgba(255, 255, 255, 0.05)', \r\n                                padding: '16px', \r\n                                borderRadius: '8px',\r\n                                marginTop: '16px'\r\n                            }}>\r\n                                <h4 style={{ color: '#e2e8f0', marginBottom: '8px' }}>ðŸ’¡ Quick Analysis</h4>\r\n                                <p style={{ color: '#94a3b8', fontSize: '14px', lineHeight: '1.5' }}>\r\n                                    {getCardAnalysis(currentCard)}\r\n                                </p>\r\n                            </div>\r\n\r\n                            {currentCard.scryfallUri && (\r\n                                <button\r\n                                    onClick={() => window.open(currentCard.scryfallUri, '_blank')}\r\n                                    style={{\r\n                                        marginTop: '16px',\r\n                                        padding: '10px 20px',\r\n                                        background: 'rgba(74, 144, 226, 0.2)',\r\n                                        border: '1px solid #4a90e2',\r\n                                        color: '#4a90e2',\r\n                                        borderRadius: '8px',\r\n                                        cursor: 'pointer',\r\n                                        fontSize: '14px',\r\n                                        fontWeight: '600'\r\n                                    }}\r\n                                >\r\n                                    ðŸ”— View on Scryfall\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    ) : (\r\n                        <div style={{ \r\n                            textAlign: 'center', \r\n                            padding: '60px 20px',\r\n                            background: 'rgba(255, 255, 255, 0.02)',\r\n                            borderRadius: '12px',\r\n                            border: '1px dashed rgba(255, 255, 255, 0.1)'\r\n                        }}>\r\n                            <div style={{ fontSize: '48px', marginBottom: '16px' }}>ðŸƒ</div>\r\n                            <h3 style={{ color: '#e2e8f0', marginBottom: '8px' }}>No Card Selected</h3>\r\n                            <p style={{ color: '#94a3b8' }}>\r\n                                Scan a card in the Scanner tab to see detailed analysis here.\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* Collection Insights */}\r\n            {activeSection === 'collection' && (\r\n                <div>\r\n                    {insights ? (\r\n                        <div>\r\n                            <div style={{ \r\n                                background: 'rgba(34, 197, 94, 0.1)', \r\n                                padding: '24px', \r\n                                borderRadius: '12px',\r\n                                border: '1px solid rgba(34, 197, 94, 0.3)',\r\n                                marginBottom: '20px'\r\n                            }}>\r\n                                <h3 style={{ color: '#22c55e', marginBottom: '16px' }}>\r\n                                    ðŸ“Š Collection Overview\r\n                                </h3>\r\n                                <div style={{ fontSize: '32px', fontWeight: 'bold', color: '#22c55e', marginBottom: '8px' }}>\r\n                                    {insights.totalCards}\r\n                                </div>\r\n                                <div style={{ color: '#94a3b8' }}>Total Cards Scanned</div>\r\n                            </div>\r\n\r\n                            {Object.keys(insights.colorCount).length > 0 && (\r\n                                <div style={{ \r\n                                    background: 'rgba(255, 255, 255, 0.05)', \r\n                                    padding: '20px', \r\n                                    borderRadius: '12px',\r\n                                    border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                                    marginBottom: '20px'\r\n                                }}>\r\n                                    <h4 style={{ color: '#e2e8f0', marginBottom: '16px' }}>ðŸŽ¨ Color Distribution</h4>\r\n                                    <div style={{ display: 'grid', gap: '8px' }}>\r\n                                        {Object.entries(insights.colorCount).map(([color, count]) => (\r\n                                            <div key={color} style={{ \r\n                                                display: 'flex', \r\n                                                justifyContent: 'space-between',\r\n                                                alignItems: 'center',\r\n                                                padding: '8px 0'\r\n                                            }}>\r\n                                                <span style={{ color: getColorName(color) }}>\r\n                                                    {getColorSymbol(color)} {getColorName(color)}\r\n                                                </span>\r\n                                                <span style={{ fontWeight: '600' }}>{count}</span>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {Object.keys(insights.typeCount).length > 0 && (\r\n                                <div style={{ \r\n                                    background: 'rgba(255, 255, 255, 0.05)', \r\n                                    padding: '20px', \r\n                                    borderRadius: '12px',\r\n                                    border: '1px solid rgba(255, 255, 255, 0.1)'\r\n                                }}>\r\n                                    <h4 style={{ color: '#e2e8f0', marginBottom: '16px' }}>ðŸŽ­ Card Types</h4>\r\n                                    <div style={{ display: 'grid', gap: '8px' }}>\r\n                                        {Object.entries(insights.typeCount).map(([type, count]) => (\r\n                                            <div key={type} style={{ \r\n                                                display: 'flex', \r\n                                                justifyContent: 'space-between',\r\n                                                alignItems: 'center',\r\n                                                padding: '8px 0'\r\n                                            }}>\r\n                                                <span>{type}</span>\r\n                                                <span style={{ fontWeight: '600' }}>{count}</span>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    ) : (\r\n                        <div style={{ \r\n                            textAlign: 'center', \r\n                            padding: '60px 20px',\r\n                            background: 'rgba(255, 255, 255, 0.02)',\r\n                            borderRadius: '12px',\r\n                            border: '1px dashed rgba(255, 255, 255, 0.1)'\r\n                        }}>\r\n                            <div style={{ fontSize: '48px', marginBottom: '16px' }}>ðŸ“Š</div>\r\n                            <h3 style={{ color: '#e2e8f0', marginBottom: '8px' }}>No Collection Data</h3>\r\n                            <p style={{ color: '#94a3b8' }}>\r\n                                Start scanning cards to see collection insights and analytics.\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* Quick Rules */}\r\n            {activeSection === 'rules' && (\r\n                <div style={{ display: 'grid', gap: '16px' }}>\r\n                    <div style={{ \r\n                        background: 'rgba(255, 255, 255, 0.05)', \r\n                        padding: '20px', \r\n                        borderRadius: '12px',\r\n                        border: '1px solid rgba(255, 255, 255, 0.1)'\r\n                    }}>\r\n                        <h4 style={{ color: '#4a90e2', marginBottom: '12px' }}>âš¡ Quick Rules</h4>\r\n                        <div style={{ display: 'grid', gap: '12px', fontSize: '14px', lineHeight: '1.5' }}>\r\n                            <div><strong>Turn Order:</strong> Untap â†’ Upkeep â†’ Draw â†’ Main 1 â†’ Combat â†’ Main 2 â†’ End</div>\r\n                            <div><strong>Priority:</strong> Active player gets priority first, then passes around</div>\r\n                            <div><strong>Stack:</strong> Last spell cast resolves first (LIFO)</div>\r\n                            <div><strong>Summoning Sickness:</strong> Creatures can't attack or use tap abilities on first turn</div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={{ \r\n                        background: 'rgba(255, 255, 255, 0.05)', \r\n                        padding: '20px', \r\n                        borderRadius: '12px',\r\n                        border: '1px solid rgba(255, 255, 255, 0.1)'\r\n                    }}>\r\n                        <h4 style={{ color: '#4a90e2', marginBottom: '12px' }}>ðŸ›¡ï¸ Combat Basics</h4>\r\n                        <div style={{ display: 'grid', gap: '12px', fontSize: '14px', lineHeight: '1.5' }}>\r\n                            <div><strong>Flying:</strong> Can only be blocked by creatures with flying or reach</div>\r\n                            <div><strong>First Strike:</strong> Deals damage before normal combat damage</div>\r\n                            <div><strong>Deathtouch:</strong> Any damage dealt destroys the creature</div>\r\n                            <div><strong>Trample:</strong> Excess damage goes to defending player</div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={{ textAlign: 'center', marginTop: '20px' }}>\r\n                        <div style={{ display: 'flex', gap: '12px', justifyContent: 'center', flexWrap: 'wrap' }}>\r\n                            <button \r\n                                onClick={() => window.open('https://magic.wizards.com/en/rules', '_blank')}\r\n                                style={{\r\n                                    padding: '10px 20px',\r\n                                    background: 'rgba(74, 144, 226, 0.2)',\r\n                                    border: '1px solid #4a90e2',\r\n                                    color: '#4a90e2',\r\n                                    borderRadius: '8px',\r\n                                    cursor: 'pointer',\r\n                                    fontSize: '14px',\r\n                                    fontWeight: '600'\r\n                                }}\r\n                            >\r\n                                ðŸ“– Official Rules\r\n                            </button>\r\n                            <button \r\n                                onClick={() => window.open('https://scryfall.com/', '_blank')}\r\n                                style={{\r\n                                    padding: '10px 20px',\r\n                                    background: 'rgba(74, 144, 226, 0.2)',\r\n                                    border: '1px solid #4a90e2',\r\n                                    color: '#4a90e2',\r\n                                    borderRadius: '8px',\r\n                                    cursor: 'pointer',\r\n                                    fontSize: '14px',\r\n                                    fontWeight: '600'\r\n                                }}\r\n                            >\r\n                                ðŸ” Scryfall\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n// ðŸ”¥ SIMPLE DECK MANAGER COMPONENT\r\nconst DeckManager = ({ savedCards, onRemoveCard, onOpenScryfall }) => {\r\n    const [viewMode, setViewMode] = useState('grid');\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [sortBy, setSortBy] = useState('name');\r\n\r\n    const filteredAndSortedCards = savedCards\r\n        .filter(card => \r\n            card.cardName.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            (card.cardType && card.cardType.toLowerCase().includes(searchTerm.toLowerCase()))\r\n        )\r\n        .sort((a, b) => {\r\n            switch (sortBy) {\r\n                case 'name':\r\n                    return a.cardName.localeCompare(b.cardName);\r\n                case 'type':\r\n                    return (a.cardType || '').localeCompare(b.cardType || '');\r\n                case 'set':\r\n                    return (a.setInfo || '').localeCompare(b.setInfo || '');\r\n                case 'date':\r\n                    return new Date(b.addedAt) - new Date(a.addedAt);\r\n                default:\r\n                    return 0;\r\n            }\r\n        });\r\n\r\n    const exportToMoxfield = () => {\r\n        const moxfieldFormat = savedCards.map(card => `1 ${card.cardName}`).join('\\n');\r\n        const blob = new Blob([moxfieldFormat], { type: 'text/plain' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = 'mtg_collection.txt';\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n        showProfessionalToast('ðŸ“ Collection exported successfully!', 'success');\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h2 style={{ color: '#4a90e2', marginBottom: '24px', display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                ðŸƒ Card Collection ({savedCards.length} cards)\r\n            </h2>\r\n\r\n            {/* Controls */}\r\n            <div style={{ \r\n                display: 'flex', \r\n                gap: '12px', \r\n                marginBottom: '24px',\r\n                flexWrap: 'wrap',\r\n                alignItems: 'center'\r\n            }}>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Search cards...\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                    style={{\r\n                        padding: '8px 12px',\r\n                        background: 'rgba(255, 255, 255, 0.1)',\r\n                        border: '1px solid rgba(255, 255, 255, 0.2)',\r\n                        borderRadius: '6px',\r\n                        color: 'white',\r\n                        fontSize: '14px',\r\n                        minWidth: '200px'\r\n                    }}\r\n                />\r\n                \r\n                <select\r\n                    value={sortBy}\r\n                    onChange={(e) => setSortBy(e.target.value)}\r\n                    style={{\r\n                        padding: '8px 12px',\r\n                        background: 'rgba(255, 255, 255, 0.1)',\r\n                        border: '1px solid rgba(255, 255, 255, 0.2)',\r\n                        borderRadius: '6px',\r\n                        color: 'white',\r\n                        fontSize: '14px'\r\n                    }}\r\n                >\r\n                    <option value=\"name\">Sort by Name</option>\r\n                    <option value=\"type\">Sort by Type</option>\r\n                    <option value=\"set\">Sort by Set</option>\r\n                    <option value=\"date\">Sort by Date Added</option>\r\n                </select>\r\n\r\n                <button\r\n                    onClick={() => setViewMode(viewMode === 'grid' ? 'list' : 'grid')}\r\n                    style={{\r\n                        padding: '8px 12px',\r\n                        background: 'rgba(74, 144, 226, 0.2)',\r\n                        border: '1px solid #4a90e2',\r\n                        color: '#4a90e2',\r\n                        borderRadius: '6px',\r\n                        cursor: 'pointer',\r\n                        fontSize: '14px'\r\n                    }}\r\n                >\r\n                    {viewMode === 'grid' ? 'ðŸ“‹ List View' : 'ðŸ”² Grid View'}\r\n                </button>\r\n\r\n                <button\r\n                    onClick={exportToMoxfield}\r\n                    style={{\r\n                        padding: '8px 12px',\r\n                        background: 'rgba(34, 197, 94, 0.2)',\r\n                        border: '1px solid #22c55e',\r\n                        color: '#22c55e',\r\n                        borderRadius: '6px',\r\n                        cursor: 'pointer',\r\n                        fontSize: '14px'\r\n                    }}\r\n                >\r\n                    ðŸ“¤ Export Collection\r\n                </button>\r\n            </div>\r\n\r\n            {/* Cards Display */}\r\n            {filteredAndSortedCards.length === 0 ? (\r\n                <div style={{\r\n                    textAlign: 'center',\r\n                    padding: '60px 20px',\r\n                    background: 'rgba(255, 255, 255, 0.02)',\r\n                    borderRadius: '12px',\r\n                    border: '1px dashed rgba(255, 255, 255, 0.1)'\r\n                }}>\r\n                    <div style={{ fontSize: '48px', marginBottom: '16px' }}>ðŸƒ</div>\r\n                    <h3 style={{ color: '#e2e8f0', marginBottom: '8px' }}>\r\n                        {searchTerm ? 'No matching cards found' : 'No Cards in Collection'}\r\n                    </h3>\r\n                    <p style={{ color: '#94a3b8' }}>\r\n                        {searchTerm ? 'Try a different search term' : 'Start scanning cards to build your collection'}\r\n                    </p>\r\n                </div>\r\n            ) : (\r\n                <div style={{\r\n                    display: viewMode === 'grid' ? 'grid' : 'block',\r\n                    gridTemplateColumns: viewMode === 'grid' ? 'repeat(auto-fill, minmax(280px, 1fr))' : '1fr',\r\n                    gap: '16px'\r\n                }}>\r\n                    {filteredAndSortedCards.map((card, index) => (\r\n                        <div\r\n                            key={card.id || index}\r\n                            style={{\r\n                                background: 'rgba(255, 255, 255, 0.05)',\r\n                                padding: '16px',\r\n                                borderRadius: '8px',\r\n                                border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                                display: viewMode === 'list' ? 'flex' : 'block',\r\n                                alignItems: viewMode === 'list' ? 'center' : 'stretch',\r\n                                gap: viewMode === 'list' ? '16px' : '0'\r\n                            }}\r\n                        >\r\n                            <div style={{ flex: viewMode === 'list' ? '1' : 'auto' }}>\r\n                                <h4 style={{ color: '#4a90e2', marginBottom: '8px', fontSize: '16px' }}>\r\n                                    {card.cardName}\r\n                                </h4>\r\n                                <div style={{ fontSize: '13px', color: '#94a3b8', marginBottom: '8px' }}>\r\n                                    {card.cardType && <div>Type: {card.cardType}</div>}\r\n                                    {card.setInfo && <div>Set: {card.setInfo}</div>}\r\n                                    {card.scannedAt && <div>Added: {card.scannedAt}</div>}\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div style={{ \r\n                                display: 'flex', \r\n                                gap: '8px',\r\n                                marginTop: viewMode === 'grid' ? '12px' : '0'\r\n                            }}>\r\n                                <button\r\n                                    onClick={() => onOpenScryfall(card)}\r\n                                    style={{\r\n                                        padding: '6px 12px',\r\n                                        background: 'rgba(74, 144, 226, 0.2)',\r\n                                        border: '1px solid #4a90e2',\r\n                                        color: '#4a90e2',\r\n                                        borderRadius: '4px',\r\n                                        cursor: 'pointer',\r\n                                        fontSize: '12px'\r\n                                    }}\r\n                                >\r\n                                    ðŸ”— Scryfall\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => onRemoveCard(card.id)}\r\n                                    style={{\r\n                                        padding: '6px 12px',\r\n                                        background: 'rgba(220, 53, 69, 0.2)',\r\n                                        border: '1px solid #dc3545',\r\n                                        color: '#dc3545',\r\n                                        borderRadius: '4px',\r\n                                        cursor: 'pointer',\r\n                                        fontSize: '12px'\r\n                                    }}\r\n                                >\r\n                                    ðŸ—‘ï¸ Remove\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n// ðŸ”¥ IMPROVED Smart Cooldown System with Better Debugging\r\nclass MTGScannerCooldown {\r\n    constructor() {\r\n        this.lastDetectedCard = null;\r\n        this.lastDetectionTime = 0;\r\n        this.lastApiCall = 0;\r\n        this.consecutiveDetections = 0;\r\n        this.isEditionSelectorOpen = false;\r\n        this.detectionBuffer = [];\r\n        \r\n        // ðŸ”¥ ADJUSTED Cooldown periods for better user experience\r\n        this.SAME_CARD_COOLDOWN = 12000;      // 12 seconds for same card\r\n        this.MIN_API_INTERVAL = 3000;         // 3 seconds between API calls\r\n        this.DETECTION_STABILITY = 2;         // Need 2 consistent detections (was 3)\r\n        this.MAX_CONSECUTIVE = 3;             // Max consecutive before pause (was 2)\r\n        this.LONG_PAUSE_DURATION = 20000;    // 20 second pause (was 30)\r\n        \r\n        this.isLongPauseActive = false;\r\n        this.longPauseStartTime = 0;\r\n    }\r\n\r\n    shouldScan(cardName = null) {\r\n        const now = Date.now();\r\n        \r\n        console.log(`ðŸ” COOLDOWN CHECK for \"${cardName}\" at ${new Date(now).toLocaleTimeString()}`);\r\n        \r\n        // 1. Don't scan if edition selector is open\r\n        if (this.isEditionSelectorOpen) {\r\n            console.log(\"ðŸš« BLOCKED: Edition selector open\");\r\n            return false;\r\n        }\r\n        \r\n        // 2. Check long pause\r\n        if (this.isLongPauseActive) {\r\n            const pauseRemaining = this.LONG_PAUSE_DURATION - (now - this.longPauseStartTime);\r\n            if (pauseRemaining > 0) {\r\n                console.log(`ðŸš« BLOCKED: Long pause active (${Math.ceil(pauseRemaining/1000)}s remaining)`);\r\n                return false;\r\n            } else {\r\n                this.isLongPauseActive = false;\r\n                this.consecutiveDetections = 0;\r\n                console.log(\"âœ… Long pause ended, scanning can resume\");\r\n            }\r\n        }\r\n        \r\n        // 3. Enforce minimum API interval\r\n        if (now - this.lastApiCall < this.MIN_API_INTERVAL) {\r\n            const waitTime = this.MIN_API_INTERVAL - (now - this.lastApiCall);\r\n            console.log(`ðŸš« BLOCKED: API cooldown (${Math.ceil(waitTime/1000)}s remaining)`);\r\n            return false;\r\n        }\r\n        \r\n        // 4. Same card cooldown\r\n        if (cardName && cardName === this.lastDetectedCard) {\r\n            const timeSinceLastDetection = now - this.lastDetectionTime;\r\n            if (timeSinceLastDetection < this.SAME_CARD_COOLDOWN) {\r\n                const waitTime = this.SAME_CARD_COOLDOWN - timeSinceLastDetection;\r\n                console.log(`ðŸš« BLOCKED: Same card \"${cardName}\" cooldown (${Math.ceil(waitTime/1000)}s remaining)`);\r\n                return false;\r\n            }\r\n        }\r\n        \r\n        console.log(\"âœ… COOLDOWN PASSED - can scan\");\r\n        return true;\r\n    }\r\n\r\n    addDetection(cardName, confidence) {\r\n        const now = Date.now();\r\n        \r\n        this.detectionBuffer.push({\r\n            cardName,\r\n            confidence,\r\n            timestamp: now\r\n        });\r\n        \r\n        // Keep only recent detections (last 8 seconds)\r\n        this.detectionBuffer = this.detectionBuffer.filter(\r\n            detection => now - detection.timestamp < 8000\r\n        );\r\n        \r\n        const recentSameCard = this.detectionBuffer.filter(\r\n            detection => detection.cardName === cardName\r\n        );\r\n        \r\n        const isStable = recentSameCard.length >= this.DETECTION_STABILITY;\r\n        \r\n        console.log(`ðŸ“Š STABILITY CHECK: ${recentSameCard.length}/${this.DETECTION_STABILITY} for \"${cardName}\" - ${isStable ? 'STABLE' : 'NOT STABLE'}`);\r\n        \r\n        return isStable;\r\n    }\r\n\r\n    recordDetection(cardName) {\r\n        const now = Date.now();\r\n        \r\n        if (cardName === this.lastDetectedCard) {\r\n            this.consecutiveDetections++;\r\n        } else {\r\n            this.consecutiveDetections = 1;\r\n            this.lastDetectedCard = cardName;\r\n        }\r\n        \r\n        this.lastDetectionTime = now;\r\n        this.lastApiCall = now;\r\n        \r\n        this.detectionBuffer = [];\r\n        \r\n        console.log(`âœ… DETECTION RECORDED: \"${cardName}\" (consecutive: ${this.consecutiveDetections})`);\r\n        \r\n        if (this.consecutiveDetections >= this.MAX_CONSECUTIVE) {\r\n            this.isLongPauseActive = true;\r\n            this.longPauseStartTime = now;\r\n            console.log(`ðŸ›‘ LONG PAUSE ACTIVATED (${this.MAX_CONSECUTIVE} consecutive detections)`);\r\n        }\r\n    }\r\n\r\n    resetCooldowns() {\r\n        console.log(\"ðŸ”„ COOLDOWNS RESET\");\r\n        this.consecutiveDetections = 0;\r\n        this.lastDetectedCard = null;\r\n        this.lastDetectionTime = 0;\r\n        this.detectionBuffer = [];\r\n        this.isLongPauseActive = false;\r\n        this.longPauseStartTime = 0;\r\n    }\r\n\r\n    setEditionSelectorOpen(isOpen) {\r\n        this.isEditionSelectorOpen = isOpen;\r\n        console.log(`ðŸŽ­ Edition selector ${isOpen ? 'OPENED' : 'CLOSED'}`);\r\n    }\r\n\r\n    getCooldownStatus() {\r\n        const now = Date.now();\r\n        \r\n        let longPauseRemaining = 0;\r\n        if (this.isLongPauseActive) {\r\n            longPauseRemaining = Math.max(0, this.LONG_PAUSE_DURATION - (now - this.longPauseStartTime));\r\n        }\r\n        \r\n        return {\r\n            sameCardCooldown: this.lastDetectedCard ? Math.max(0, this.SAME_CARD_COOLDOWN - (now - this.lastDetectionTime)) : 0,\r\n            apiCooldown: Math.max(0, this.MIN_API_INTERVAL - (now - this.lastApiCall)),\r\n            consecutiveDetections: this.consecutiveDetections,\r\n            longPauseRemaining,\r\n            isEditionSelectorOpen: this.isEditionSelectorOpen,\r\n            canScan: this.shouldScan(this.lastDetectedCard),\r\n            detectionBufferSize: this.detectionBuffer.length,\r\n            stabilityRequired: this.DETECTION_STABILITY\r\n        };\r\n    }\r\n}\r\n\r\n// ðŸ”¥ MAIN SCANNER COMPONENT\r\nconst Scanner = () => {\r\n    // Core scanner state\r\n    const [isScanning, setIsScanning] = useState(false);\r\n    const [scanResult, setScanResult] = useState(null);\r\n    const [cameraStatus, setCameraStatus] = useState('initializing');\r\n    const [currentCard, setCurrentCard] = useState(null);\r\n    const [scanMode, setScanMode] = useState('continuous');\r\n    \r\n    // Smart scanning state\r\n    const [continuousCount, setContinuousCount] = useState(0);\r\n    const [showContinueDialog, setShowContinueDialog] = useState(false);\r\n    const [autoSaveEnabled] = useState(true);\r\n    \r\n    // ðŸ”¥ Cooldown system state\r\n    const [cooldownStatus, setCooldownStatus] = useState({});\r\n    \r\n    // UI state\r\n    const [activeTab, setActiveTab] = useState('scanner');\r\n    const [scanHistory, setScanHistory] = useState([]);\r\n    const [isUIVisible, setIsUIVisible] = useState(true);\r\n    const [savedCards, setSavedCards] = useState([]);\r\n    \r\n    // Edition selection state\r\n    const [showEditionSelector, setShowEditionSelector] = useState(false);\r\n    const [availableEditions, setAvailableEditions] = useState([]);\r\n    const [pendingCardData, setPendingCardData] = useState(null);\r\n    const [pendingScanMode, setPendingScanMode] = useState(null);\r\n    const [scanningPausedForSelection, setScanningPausedForSelection] = useState(false);\r\n    \r\n    // AI Learning for edition preferences\r\n    const [editionPreferences, setEditionPreferences] = useState({});\r\n    \r\n    // Collection limits and premium features\r\n    const [isPremiumUser, setIsPremiumUser] = useState(false);\r\n    const [showPaywallModal, setShowPaywallModal] = useState(false);\r\n    const FREE_COLLECTION_LIMIT = 100;\r\n    \r\n    // Camera state\r\n    const [cameraError, setCameraError] = useState(null);\r\n    const [cameraRetryCount, setCameraRetryCount] = useState(0);\r\n    const [cameraInitializationComplete, setCameraInitializationComplete] = useState(false);\r\n    const [availableCameras, setAvailableCameras] = useState([]);\r\n    const [selectedCameraId, setSelectedCameraId] = useState(null);\r\n    \r\n    // Refs\r\n    const videoRef = useRef(null);\r\n    const scanIntervalRef = useRef(null);\r\n    const visionServiceRef = useRef(null);\r\n    const cameraStreamRef = useRef(null);\r\n    const initializationPromiseRef = useRef(null);\r\n    \r\n    // ðŸ”¥ Cooldown system ref\r\n    const cooldownSystemRef = useRef(new MTGScannerCooldown());\r\n\r\n    // Initialize services and camera\r\n    useEffect(() => {\r\n        console.log('ðŸ”§ Component mounting - initializing services...');\r\n        initializeServices();\r\n        loadSavedData();\r\n        \r\n        if (!initializationPromiseRef.current) {\r\n            console.log('ðŸš€ Starting camera initialization...');\r\n            initializationPromiseRef.current = enumerateCameras().then(() => setupCamera());\r\n        }\r\n        \r\n        // Update cooldown status periodically\r\n        const cooldownUpdateInterval = setInterval(() => {\r\n            setCooldownStatus(cooldownSystemRef.current.getCooldownStatus());\r\n        }, 500); // More frequent updates for better debugging\r\n        \r\n        return () => {\r\n            console.log('ðŸ§¹ Component unmounting - cleaning up...');\r\n            clearInterval(cooldownUpdateInterval);\r\n            cleanup();\r\n        };\r\n    }, []);\r\n\r\n    // Handle tab switching\r\n    useEffect(() => {\r\n        console.log(`ðŸŽ¯ Tab switched to: ${activeTab}`);\r\n        \r\n        if (activeTab === 'scanner' && cameraStreamRef.current && cameraStreamRef.current.active) {\r\n            if (videoRef.current && !videoRef.current.srcObject) {\r\n                console.log('ðŸ“· Reconnecting video element to persistent stream...');\r\n                videoRef.current.srcObject = cameraStreamRef.current;\r\n                videoRef.current.play();\r\n            }\r\n        }\r\n        \r\n        if (activeTab !== 'scanner' && isScanning) {\r\n            console.log('â¸ï¸ Pausing scanning - left scanner tab');\r\n            stopScanning();\r\n        }\r\n    }, [activeTab, isScanning]);\r\n\r\n    const initializeServices = () => {\r\n        console.log('ðŸ”§ Initializing MTG Scanner Pro...');\r\n        \r\n        try {\r\n            visionServiceRef.current = new ClaudeVisionService();\r\n            console.log('âœ… Vision Service initialized successfully');\r\n        } catch (error) {\r\n            console.error('âŒ Service initialization failed:', error);\r\n        }\r\n    };\r\n\r\n    const loadSavedData = () => {\r\n        try {\r\n            const saved = localStorage.getItem('mtg_saved_cards');\r\n            if (saved) {\r\n                setSavedCards(JSON.parse(saved));\r\n                console.log('ðŸ“ Loaded saved cards from storage');\r\n            }\r\n            \r\n            const preferences = localStorage.getItem('mtg_edition_preferences');\r\n            if (preferences) {\r\n                setEditionPreferences(JSON.parse(preferences));\r\n                console.log('ðŸ§  Loaded edition preferences');\r\n            }\r\n            \r\n            const premiumStatus = localStorage.getItem('mtg_premium_status');\r\n            if (premiumStatus === 'true') {\r\n                setIsPremiumUser(true);\r\n                console.log('ðŸ’Ž Premium user status loaded');\r\n            }\r\n            \r\n        } catch (error) {\r\n            console.error('âŒ Failed to load saved data:', error);\r\n        }\r\n    };\r\n\r\n    const enumerateCameras = async () => {\r\n        try {\r\n            const devices = await navigator.mediaDevices.enumerateDevices();\r\n            const videoDevices = devices.filter(device => device.kind === 'videoinput');\r\n            \r\n            console.log('ðŸ“· Available cameras:', videoDevices.length);\r\n            \r\n            setAvailableCameras(videoDevices);\r\n            \r\n            // Auto-select best camera\r\n            const logitechCamera = videoDevices.find(device => \r\n                device.label.toLowerCase().includes('logitech') || \r\n                device.label.toLowerCase().includes('c920')\r\n            );\r\n            \r\n            if (logitechCamera) {\r\n                setSelectedCameraId(logitechCamera.deviceId);\r\n                console.log('âœ… Auto-selected Logitech camera');\r\n            } else if (videoDevices.length > 0) {\r\n                setSelectedCameraId(videoDevices[0].deviceId);\r\n                console.log('âœ… Auto-selected first available camera');\r\n            }\r\n            \r\n        } catch (error) {\r\n            console.error('âŒ Failed to enumerate cameras:', error);\r\n        }\r\n    };\r\n\r\n    const setupCamera = async (deviceId = null) => {\r\n        console.log('ðŸŽ¥ Setting up camera...');\r\n        setCameraStatus('requesting');\r\n        setCameraError(null);\r\n        \r\n        try {\r\n            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n                throw new Error('Camera API not supported in this browser');\r\n            }\r\n\r\n            if (cameraStreamRef.current && cameraStreamRef.current.active) {\r\n                console.log('ðŸ“· Camera stream already active, reusing...');\r\n                \r\n                if (videoRef.current && !videoRef.current.srcObject) {\r\n                    videoRef.current.srcObject = cameraStreamRef.current;\r\n                    videoRef.current.play();\r\n                }\r\n                \r\n                setCameraStatus('ready');\r\n                setCameraInitializationComplete(true);\r\n                return;\r\n            }\r\n\r\n            const useDeviceId = deviceId || selectedCameraId;\r\n            let constraints;\r\n            \r\n            if (useDeviceId) {\r\n                constraints = {\r\n                    video: {\r\n                        deviceId: { exact: useDeviceId },\r\n                        width: { ideal: 1280 },\r\n                        height: { ideal: 720 },\r\n                        frameRate: { ideal: 30 }\r\n                    },\r\n                    audio: false\r\n                };\r\n            } else {\r\n                constraints = {\r\n                    video: {\r\n                        width: { ideal: 1280, min: 320 },\r\n                        height: { ideal: 720, min: 240 },\r\n                        facingMode: { ideal: 'environment' },\r\n                        frameRate: { ideal: 30 }\r\n                    },\r\n                    audio: false\r\n                };\r\n            }\r\n            \r\n            const stream = await navigator.mediaDevices.getUserMedia(constraints);\r\n            cameraStreamRef.current = stream;\r\n            setCameraInitializationComplete(true);\r\n            \r\n            if (videoRef.current) {\r\n                videoRef.current.srcObject = stream;\r\n                videoRef.current.onloadedmetadata = () => {\r\n                    videoRef.current.play();\r\n                    setCameraStatus('ready');\r\n                    setCameraError(null);\r\n                    setCameraRetryCount(0);\r\n                    console.log('âœ… Camera ready:', `${videoRef.current.videoWidth}x${videoRef.current.videoHeight}`);\r\n                    showProfessionalToast('âœ… Camera ready!', 'success');\r\n                };\r\n            }\r\n            \r\n        } catch (error) {\r\n            console.error('âŒ Camera setup failed:', error);\r\n            setCameraStatus('error');\r\n            handleCameraError(error);\r\n        }\r\n    };\r\n\r\n    const handleCameraError = (error) => {\r\n        let errorMessage = '';\r\n        let errorAction = '';\r\n        let canRetry = false;\r\n\r\n        switch (error.name) {\r\n            case 'NotAllowedError':\r\n                errorMessage = 'Camera permission denied';\r\n                errorAction = 'Please allow camera access and try again';\r\n                canRetry = true;\r\n                break;\r\n            case 'NotFoundError':\r\n                errorMessage = 'No camera found';\r\n                errorAction = 'Please connect a camera';\r\n                canRetry = true;\r\n                break;\r\n            case 'NotReadableError':\r\n                errorMessage = 'Camera is busy';\r\n                errorAction = 'Close other apps using the camera';\r\n                canRetry = true;\r\n                break;\r\n            default:\r\n                errorMessage = error.message || 'Camera error';\r\n                errorAction = 'Please check your camera and try again';\r\n                canRetry = true;\r\n        }\r\n\r\n        setCameraError({ message: errorMessage, action: errorAction, canRetry });\r\n        \r\n        if (canRetry && cameraRetryCount < 2 && error.name !== 'NotAllowedError') {\r\n            const retryDelay = (cameraRetryCount + 1) * 2000;\r\n            console.log(`ðŸ”„ Auto-retrying camera setup in ${retryDelay/1000}s`);\r\n            \r\n            setTimeout(() => {\r\n                setCameraRetryCount(prev => prev + 1);\r\n                setupCamera();\r\n            }, retryDelay);\r\n        }\r\n    };\r\n\r\n    // ðŸ”¥ IMPROVED scanning with better cooldown integration\r\n    const startScanning = () => {\r\n        if (!visionServiceRef.current || cameraStatus !== 'ready') {\r\n            console.log('âš ï¸ Scanner not ready');\r\n            if (cameraStatus === 'error') {\r\n                showProfessionalToast('âŒ Camera not ready. Please fix camera issues first.', 'error');\r\n            }\r\n            return;\r\n        }\r\n        \r\n        console.log(`â–¶ï¸ Starting MTG Scanner - ${scanMode} mode...`);\r\n        setIsScanning(true);\r\n        setScanningPausedForSelection(false);\r\n        \r\n        // Reset cooldowns when starting\r\n        cooldownSystemRef.current.resetCooldowns();\r\n        setCooldownStatus(cooldownSystemRef.current.getCooldownStatus());\r\n        \r\n        if (scanMode === 'continuous') {\r\n            setContinuousCount(0);\r\n        }\r\n        \r\n        // ðŸ”¥ IMPROVED scanning interval\r\n        scanIntervalRef.current = setInterval(async () => {\r\n            try {\r\n                const currentCardName = currentCard?.cardName;\r\n                \r\n                // ðŸ”¥ Check cooldown system first\r\n                if (!cooldownSystemRef.current.shouldScan(currentCardName)) {\r\n                    setCooldownStatus(cooldownSystemRef.current.getCooldownStatus());\r\n                    return; // Skip this frame\r\n                }\r\n\r\n                // Check if edition selector is open\r\n                if (scanningPausedForSelection || showEditionSelector) {\r\n                    console.log('â¸ï¸ Scanning paused for edition selection');\r\n                    cooldownSystemRef.current.setEditionSelectorOpen(true);\r\n                    return;\r\n                } else {\r\n                    cooldownSystemRef.current.setEditionSelectorOpen(false);\r\n                }\r\n\r\n                console.log(\"ðŸ”„ Processing frame for MTG card...\");\r\n                \r\n                // Call vision service\r\n                const result = await visionServiceRef.current.processVideoFrame(videoRef.current);\r\n                \r\n                if (result && result.hasCard && result.confidence >= 85) {\r\n                    console.log(`ðŸŽ¯ High-confidence detection: ${result.cardName} (${result.confidence}%)`);\r\n                    \r\n                    // Check stability\r\n                    const isStable = cooldownSystemRef.current.addDetection(result.cardName, result.confidence);\r\n                    \r\n                    if (isStable) {\r\n                        console.log('âœ… Card detection is STABLE, processing...');\r\n                        \r\n                        // Record detection\r\n                        cooldownSystemRef.current.recordDetection(result.cardName);\r\n                        setCooldownStatus(cooldownSystemRef.current.getCooldownStatus());\r\n                        \r\n                        // Stop scanning in single mode\r\n                        if (scanMode === 'single') {\r\n                            stopScanning();\r\n                        }\r\n                        \r\n                        // Handle card detection\r\n                        await handleCardDetection(result);\r\n                    } else {\r\n                        console.log('â³ Card detection not stable yet...');\r\n                    }\r\n                    \r\n                } else if (result && !result.hasCard) {\r\n                    setScanResult({ hasCard: false, message: result.message || 'No MTG card detected' });\r\n                    setCurrentCard(null);\r\n                }\r\n                \r\n                // Update cooldown status\r\n                setCooldownStatus(cooldownSystemRef.current.getCooldownStatus());\r\n                \r\n            } catch (error) {\r\n                console.error('âŒ Scanning error:', error);\r\n                setScanResult({ hasCard: false, message: 'Scanner error - please try again' });\r\n            }\r\n        }, scanMode === 'single' ? 1500 : 2500); // Adjusted intervals\r\n    };\r\n\r\n    const handleCardDetection = async (detectedCard) => {\r\n        try {\r\n            console.log('ðŸŽ­ Checking for multiple editions of:', detectedCard.cardName);\r\n            \r\n            const cardName = detectedCard.cardName.trim();\r\n            const searchQuery = `!\"${cardName}\"`;\r\n            const encodedQuery = encodeURIComponent(searchQuery);\r\n            \r\n            const editionsResponse = await fetch(\r\n                `https://api.scryfall.com/cards/search?q=${encodedQuery}&unique=prints&order=released&dir=desc`\r\n            );\r\n            \r\n            if (editionsResponse.ok) {\r\n                const editionsData = await editionsResponse.json();\r\n                const editions = editionsData.data || [];\r\n                \r\n                const exactMatches = editions.filter(card => {\r\n                    const cardNameNormalized = card.name.toLowerCase().trim();\r\n                    const searchNameNormalized = cardName.toLowerCase().trim();\r\n                    return cardNameNormalized === searchNameNormalized;\r\n                });\r\n                \r\n                console.log(`ðŸŽ¯ Found ${exactMatches.length} exact matches for \"${cardName}\"`);\r\n                \r\n                if (exactMatches.length > 1) {\r\n                    // Show edition selector\r\n                    if (cooldownSystemRef.current.shouldScan()) {\r\n                        console.log(`ðŸŽ­ Multiple editions found - showing selector`);\r\n                        setScanningPausedForSelection(true);\r\n                        cooldownSystemRef.current.setEditionSelectorOpen(true);\r\n                        \r\n                        const sortedEditions = sortEditionsByPreference(cardName, exactMatches);\r\n                        \r\n                        setPendingCardData(detectedCard);\r\n                        setPendingScanMode(scanMode);\r\n                        setAvailableEditions(sortedEditions);\r\n                        setShowEditionSelector(true);\r\n                        \r\n                        setScanResult(null);\r\n                        setCurrentCard(null);\r\n                        return;\r\n                    } else {\r\n                        console.log(`ðŸ”„ Multiple editions found but in cooldown, using first edition`);\r\n                        const enhancedCard = enhanceCardWithScryfall(detectedCard, exactMatches[0]);\r\n                        displayCard(enhancedCard);\r\n                    }\r\n                    \r\n                } else if (exactMatches.length === 1) {\r\n                    console.log(`âœ… Single edition found`);\r\n                    const enhancedCard = enhanceCardWithScryfall(detectedCard, exactMatches[0]);\r\n                    displayCard(enhancedCard);\r\n                    \r\n                    if (scanMode === 'continuous' && autoSaveEnabled) {\r\n                        const saved = await saveCardToCollection(enhancedCard);\r\n                        if (saved) {\r\n                            console.log(`ðŸ’¾ AUTO-SAVED: ${enhancedCard.cardName}`);\r\n                            handleContinuousCounterAndLimit();\r\n                        }\r\n                    }\r\n                    \r\n                } else {\r\n                    console.log('âš ï¸ No exact Scryfall matches found');\r\n                    displayCard(detectedCard);\r\n                    \r\n                    if (scanMode === 'continuous' && autoSaveEnabled) {\r\n                        const saved = await saveCardToCollection(detectedCard);\r\n                        if (saved) {\r\n                            console.log(`ðŸ’¾ AUTO-SAVED: ${detectedCard.cardName}`);\r\n                            handleContinuousCounterAndLimit();\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                console.log('âŒ Scryfall API error');\r\n                displayCard(detectedCard);\r\n            }\r\n        } catch (error) {\r\n            console.error('âŒ Edition lookup error:', error);\r\n            displayCard(detectedCard);\r\n        }\r\n    };\r\n\r\n    const sortEditionsByPreference = (cardName, editions) => {\r\n        const cardKey = cardName.toLowerCase().trim();\r\n        const userPreference = editionPreferences[cardKey];\r\n        \r\n        if (userPreference) {\r\n            console.log(`ðŸ§  User previously preferred ${userPreference} for ${cardName}`);\r\n            \r\n            return editions.sort((a, b) => {\r\n                if (a.set === userPreference) return -1;\r\n                if (b.set === userPreference) return 1;\r\n                return 0;\r\n            });\r\n        }\r\n        \r\n        return editions;\r\n    };\r\n\r\n    const handleEditionSelected = async (selectedEdition) => {\r\n        if (pendingCardData && selectedEdition) {\r\n            const enhancedCard = enhanceCardWithScryfall(pendingCardData, selectedEdition);\r\n            displayCard(enhancedCard);\r\n            \r\n            console.log(`âœ… User selected: ${selectedEdition.set_name}`);\r\n            \r\n            learnEditionPreference(pendingCardData.cardName, selectedEdition);\r\n            \r\n            if (pendingScanMode === 'continuous' && autoSaveEnabled) {\r\n                const saved = await saveCardToCollection(enhancedCard);\r\n                if (saved) {\r\n                    console.log(`ðŸ’¾ AUTO-SAVED: ${enhancedCard.cardName}`);\r\n                    handleContinuousCounterAndLimit();\r\n                }\r\n                \r\n                if (continuousCount < 9) {\r\n                    console.log('ðŸ”„ Resuming continuous scanning...');\r\n                    setTimeout(() => {\r\n                        setScanningPausedForSelection(false);\r\n                        cooldownSystemRef.current.setEditionSelectorOpen(false);\r\n                        if (!isScanning) {\r\n                            startScanning();\r\n                        }\r\n                    }, 2000);\r\n                }\r\n            }\r\n        }\r\n        \r\n        // Close edition selector\r\n        setShowEditionSelector(false);\r\n        setAvailableEditions([]);\r\n        setPendingCardData(null);\r\n        setPendingScanMode(null);\r\n        setScanningPausedForSelection(false);\r\n        cooldownSystemRef.current.setEditionSelectorOpen(false);\r\n        setCooldownStatus(cooldownSystemRef.current.getCooldownStatus());\r\n    };\r\n\r\n    const handleEditionCancelled = async () => {\r\n        if (pendingCardData) {\r\n            displayCard(pendingCardData);\r\n            \r\n            if (pendingScanMode === 'continuous' && autoSaveEnabled) {\r\n                const saved = await saveCardToCollection(pendingCardData);\r\n                if (saved) {\r\n                    console.log(`ðŸ’¾ AUTO-SAVED: ${pendingCardData.cardName}`);\r\n                    handleContinuousCounterAndLimit();\r\n                }\r\n                \r\n                if (continuousCount < 9) {\r\n                    console.log('ðŸ”„ Resuming continuous scanning...');\r\n                    setTimeout(() => {\r\n                        setScanningPausedForSelection(false);\r\n                        cooldownSystemRef.current.setEditionSelectorOpen(false);\r\n                        if (!isScanning) {\r\n                            startScanning();\r\n                        }\r\n                    }, 2000);\r\n                }\r\n            }\r\n        }\r\n        \r\n        // Close edition selector\r\n        setShowEditionSelector(false);\r\n        setAvailableEditions([]);\r\n        setPendingCardData(null);\r\n        setPendingScanMode(null);\r\n        setScanningPausedForSelection(false);\r\n        cooldownSystemRef.current.setEditionSelectorOpen(false);\r\n        setCooldownStatus(cooldownSystemRef.current.getCooldownStatus());\r\n    };\r\n\r\n    const learnEditionPreference = (cardName, selectedEdition) => {\r\n        const cardKey = cardName.toLowerCase().trim();\r\n        const newPreferences = {\r\n            ...editionPreferences,\r\n            [cardKey]: selectedEdition.set\r\n        };\r\n        \r\n        setEditionPreferences(newPreferences);\r\n        localStorage.setItem('mtg_edition_preferences', JSON.stringify(newPreferences));\r\n        \r\n        console.log(`ðŸ§  AI Learning: Remembered ${selectedEdition.set_name} preference for ${cardName}`);\r\n    };\r\n\r\n    const handleContinuousCounterAndLimit = () => {\r\n        const newCount = continuousCount + 1;\r\n        setContinuousCount(newCount);\r\n        \r\n        if (newCount >= 10) {\r\n            console.log('ðŸ›‘ CONTINUOUS MODE: 10-card limit reached');\r\n            stopScanning();\r\n            setShowContinueDialog(true);\r\n        }\r\n    };\r\n\r\n    const handleContinueScanning = () => {\r\n        console.log('ðŸ”„ User chose to continue scanning...');\r\n        setShowContinueDialog(false);\r\n        setContinuousCount(0);\r\n        cooldownSystemRef.current.resetCooldowns();\r\n        startScanning();\r\n    };\r\n\r\n    const handleStopScanning = () => {\r\n        console.log('â¹ï¸ User chose to stop scanning');\r\n        setShowContinueDialog(false);\r\n        setContinuousCount(0);\r\n    };\r\n\r\n    const enhanceCardWithScryfall = (originalCard, scryfallCard) => {\r\n        return {\r\n            ...originalCard,\r\n            cardType: scryfallCard.type_line,\r\n            manaCost: scryfallCard.mana_cost,\r\n            setInfo: scryfallCard.set_name,\r\n            rarity: scryfallCard.rarity,\r\n            scryfallId: scryfallCard.id,\r\n            scryfallImageUrl: scryfallCard.image_uris?.normal || scryfallCard.image_uris?.large,\r\n            scryfallUri: scryfallCard.scryfall_uri,\r\n            prices: scryfallCard.prices,\r\n            collectorNumber: scryfallCard.collector_number,\r\n            releaseDate: scryfallCard.released_at,\r\n            scryfallVerified: true,\r\n            setCode: scryfallCard.set,\r\n            colors: scryfallCard.colors\r\n        };\r\n    };\r\n\r\n    const displayCard = (card) => {\r\n        setCurrentCard(card);\r\n        setScanResult(card);\r\n        \r\n        setScanHistory(prev => {\r\n            const isDuplicate = prev.some(historyCard => \r\n                historyCard.cardName === card.cardName && \r\n                Math.abs(new Date(historyCard.timestamp) - new Date(card.timestamp)) < 5000\r\n            );\r\n            \r\n            if (!isDuplicate) {\r\n                return [card, ...prev.slice(0, 19)];\r\n            }\r\n            return prev;\r\n        });\r\n    };\r\n\r\n    const stopScanning = () => {\r\n        console.log('â¹ï¸ Stopping MTG Scanner...');\r\n        setIsScanning(false);\r\n        setScanningPausedForSelection(false);\r\n        \r\n        if (scanIntervalRef.current) {\r\n            clearInterval(scanIntervalRef.current);\r\n            scanIntervalRef.current = null;\r\n        }\r\n        \r\n        console.log('ðŸ“· Camera stream preserved');\r\n    };\r\n\r\n    const cleanup = () => {\r\n        console.log('ðŸ§¹ Cleaning up MTG Scanner...');\r\n        stopScanning();\r\n        \r\n        if (cameraStreamRef.current) {\r\n            console.log('ðŸ“· Stopping camera stream...');\r\n            cameraStreamRef.current.getTracks().forEach(track => track.stop());\r\n            cameraStreamRef.current = null;\r\n            setCameraInitializationComplete(false);\r\n        }\r\n        \r\n        if (videoRef.current && videoRef.current.srcObject) {\r\n            const tracks = videoRef.current.srcObject.getTracks();\r\n            tracks.forEach(track => track.stop());\r\n            videoRef.current.srcObject = null;\r\n        }\r\n        \r\n        initializationPromiseRef.current = null;\r\n    };\r\n\r\n    const saveCardToCollection = async (card) => {\r\n        try {\r\n            if (!isPremiumUser && savedCards.length >= FREE_COLLECTION_LIMIT) {\r\n                console.log('ðŸš¨ Free collection limit reached');\r\n                setShowPaywallModal(true);\r\n                return false;\r\n            }\r\n            \r\n            const cardWithId = {\r\n                ...card,\r\n                id: Date.now() + Math.random(),\r\n                addedAt: new Date().toISOString(),\r\n                scannedAt: new Date().toLocaleString()\r\n            };\r\n            \r\n            const updatedCards = [cardWithId, ...savedCards];\r\n            setSavedCards(updatedCards);\r\n            \r\n            localStorage.setItem('mtg_saved_cards', JSON.stringify(updatedCards));\r\n            \r\n            console.log('ðŸ’¾ Card saved to collection:', card.cardName);\r\n            \r\n            if (scanMode === 'single') {\r\n                setScanResult(prev => ({\r\n                    ...prev,\r\n                    savedToCollection: true,\r\n                    message: `âœ… ${card.cardName} saved to collection!`\r\n                }));\r\n                \r\n                setTimeout(() => {\r\n                    setScanResult(prev => ({\r\n                        ...prev,\r\n                        savedToCollection: false,\r\n                        message: undefined\r\n                    }));\r\n                }, 3000);\r\n            }\r\n            \r\n            return true;\r\n            \r\n        } catch (error) {\r\n            console.error('âŒ Failed to save card:', error);\r\n            setScanResult(prev => ({\r\n                ...prev,\r\n                message: `âŒ Failed to save ${card.cardName}`\r\n            }));\r\n            return false;\r\n        }\r\n    };\r\n\r\n    const handleUpgradeToPremium = () => {\r\n        console.log('ðŸ’Ž Initiating premium upgrade...');\r\n        \r\n        const paypalLink = `https://www.paypal.com/paypalme/thediceyguy/9.99`;\r\n        window.open(paypalLink, '_blank');\r\n        \r\n        setTimeout(() => {\r\n            setIsPremiumUser(true);\r\n            localStorage.setItem('mtg_premium_status', 'true');\r\n            setShowPaywallModal(false);\r\n            showProfessionalToast('ðŸ’Ž Premium upgrade successful!', 'success');\r\n        }, 5000);\r\n    };\r\n\r\n    const removeCardFromCollection = (cardId) => {\r\n        try {\r\n            const updatedCards = savedCards.filter(card => card.id !== cardId);\r\n            setSavedCards(updatedCards);\r\n            localStorage.setItem('mtg_saved_cards', JSON.stringify(updatedCards));\r\n            console.log('ðŸ—‘ï¸ Card removed from collection');\r\n            showProfessionalToast('ðŸ—‘ï¸ Card removed from collection', 'info');\r\n        } catch (error) {\r\n            console.error('âŒ Failed to remove card:', error);\r\n        }\r\n    };\r\n\r\n    const openCardInScryfall = (card) => {\r\n        if (card && card.cardName) {\r\n            const searchUrl = `https://scryfall.com/search?q=${encodeURIComponent(card.cardName)}`;\r\n            window.open(searchUrl, '_blank');\r\n            console.log('ðŸ”— Opening Scryfall for:', card.cardName);\r\n        }\r\n    };\r\n\r\n    const handleTabSwitch = (newTab) => {\r\n        console.log(`ðŸ”„ Switching to ${newTab} tab`);\r\n        setActiveTab(newTab);\r\n        \r\n        if (newTab === 'scanner' && cameraStreamRef.current && videoRef.current) {\r\n            setTimeout(() => {\r\n                if (!videoRef.current.srcObject) {\r\n                    console.log('ðŸ“· Reconnecting video element...');\r\n                    videoRef.current.srcObject = cameraStreamRef.current;\r\n                    videoRef.current.play();\r\n                }\r\n            }, 100);\r\n        }\r\n    };\r\n\r\n    const retryCameraSetup = () => {\r\n        console.log('ðŸ”„ Manual camera retry requested');\r\n        setCameraRetryCount(0);\r\n        setCameraError(null);\r\n        setCameraInitializationComplete(false);\r\n        initializationPromiseRef.current = null;\r\n        setupCamera();\r\n    };\r\n\r\n    return (\r\n        <div className=\"mtg-scanner-pro\" style={{\r\n            maxWidth: '1400px',\r\n            margin: '0 auto',\r\n            padding: '20px',\r\n            minHeight: '100vh',\r\n            background: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)',\r\n            color: '#ffffff',\r\n            fontFamily: 'system-ui, -apple-system, sans-serif'\r\n        }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center',\r\n                padding: '20px 0',\r\n                borderBottom: '2px solid #4a90e2',\r\n                marginBottom: '20px',\r\n                flexWrap: 'wrap',\r\n                gap: '20px'\r\n            }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\r\n                    <div style={{\r\n                        width: '60px',\r\n                        height: '60px',\r\n                        background: 'linear-gradient(45deg, #4a90e2, #64b5f6)',\r\n                        borderRadius: '12px',\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        fontWeight: 'bold',\r\n                        fontSize: '12px',\r\n                        textAlign: 'center',\r\n                        lineHeight: '1.1'\r\n                    }}>\r\n                        MTG<br/>SCAN\r\n                    </div>\r\n                    <div>\r\n                        <h1 style={{\r\n                            fontSize: '2rem',\r\n                            background: 'linear-gradient(45deg, #4a90e2, #64b5f6)',\r\n                            WebkitBackgroundClip: 'text',\r\n                            WebkitTextFillColor: 'transparent',\r\n                            backgroundClip: 'text',\r\n                            marginBottom: '5px'\r\n                        }}>\r\n                            MTG Scanner Pro\r\n                        </h1>\r\n                        <span style={{ fontSize: '0.9rem', color: '#b0bec5' }}>\r\n                            ðŸ”¥ Smart Cooldown System â€¢ Professional Grade\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div style={{ display: 'flex', gap: '15px', flexWrap: 'wrap' }}>\r\n                    <div style={{\r\n                        background: 'rgba(74, 144, 226, 0.1)',\r\n                        padding: '8px 12px',\r\n                        borderRadius: '20px',\r\n                        border: '1px solid rgba(74, 144, 226, 0.3)',\r\n                        fontSize: '0.85rem'\r\n                    }}>\r\n                        <span style={{ color: '#94a3b8' }}>Accuracy: </span>\r\n                        <span style={{ color: '#4a90e2', fontWeight: 'bold' }}>98%</span>\r\n                    </div>\r\n                    <div style={{\r\n                        background: 'rgba(74, 144, 226, 0.1)',\r\n                        padding: '8px 12px',\r\n                        borderRadius: '20px',\r\n                        border: '1px solid rgba(74, 144, 226, 0.3)',\r\n                        fontSize: '0.85rem'\r\n                    }}>\r\n                        <span style={{ color: '#94a3b8' }}>Scanned: </span>\r\n                        <span style={{ color: '#4a90e2', fontWeight: 'bold' }}>{scanHistory.length}</span>\r\n                    </div>\r\n                    <div style={{\r\n                        background: 'rgba(74, 144, 226, 0.1)',\r\n                        padding: '8px 12px',\r\n                        borderRadius: '20px',\r\n                        border: '1px solid rgba(74, 144, 226, 0.3)',\r\n                        fontSize: '0.85rem'\r\n                    }}>\r\n                        <span style={{ color: '#94a3b8' }}>Collection: </span>\r\n                        <span style={{ color: '#4a90e2', fontWeight: 'bold' }}>{savedCards.length}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Tab Navigation */}\r\n            <ProfessionalTabs\r\n                activeTab={activeTab}\r\n                onTabChange={handleTabSwitch}\r\n                savedCards={savedCards}\r\n            />\r\n\r\n            {/* Main Content */}\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '24px' }}>\r\n                \r\n                {/* Scanner Tab */}\r\n                {activeTab === 'scanner' && (\r\n                    <>\r\n                        <div style={{\r\n                            background: 'rgba(255, 255, 255, 0.05)',\r\n                            backdropFilter: 'blur(10px)',\r\n                            border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                            borderRadius: '15px',\r\n                            padding: '24px'\r\n                        }}>\r\n                            {/* Video Container */}\r\n                            <div style={{ position: 'relative', marginBottom: '20px' }}>\r\n                                <video\r\n                                    ref={videoRef}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        maxWidth: '640px',\r\n                                        height: 'auto',\r\n                                        borderRadius: '12px',\r\n                                        border: '2px solid #4a90e2',\r\n                                        background: '#000'\r\n                                    }}\r\n                                    autoPlay\r\n                                    playsInline\r\n                                    muted\r\n                                />\r\n                                \r\n                                {/* Cooldown Status Overlay */}\r\n                                <ProfessionalCooldownStatus\r\n                                    cooldownStatus={cooldownStatus}\r\n                                    isVisible={true}\r\n                                />\r\n                                \r\n                                {/* Camera Error Overlay */}\r\n                                {cameraError && (\r\n                                    <div style={{\r\n                                        position: 'absolute',\r\n                                        top: '50%',\r\n                                        left: '50%',\r\n                                        transform: 'translate(-50%, -50%)',\r\n                                        background: 'rgba(0,0,0,0.9)',\r\n                                        color: 'white',\r\n                                        padding: '20px',\r\n                                        borderRadius: '12px',\r\n                                        textAlign: 'center',\r\n                                        border: '2px solid #dc3545'\r\n                                    }}>\r\n                                        <h3>ðŸ“¹ Camera Issue</h3>\r\n                                        <p><strong>{cameraError.message}</strong></p>\r\n                                        <p>{cameraError.action}</p>\r\n                                        {cameraError.canRetry && (\r\n                                            <button \r\n                                                onClick={retryCameraSetup}\r\n                                                style={{\r\n                                                    padding: '10px 20px',\r\n                                                    background: '#4a90e2',\r\n                                                    border: 'none',\r\n                                                    color: 'white',\r\n                                                    borderRadius: '6px',\r\n                                                    cursor: 'pointer',\r\n                                                    marginTop: '10px'\r\n                                                }}\r\n                                            >\r\n                                                ðŸ”„ Try Again\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n                                )}\r\n                                \r\n                                {/* Scanning Overlay */}\r\n                                {isScanning && (\r\n                                    <div style={{\r\n                                        position: 'absolute',\r\n                                        top: '10px',\r\n                                        left: '10px',\r\n                                        background: 'rgba(74, 144, 226, 0.8)',\r\n                                        color: 'white',\r\n                                        padding: '8px 12px',\r\n                                        borderRadius: '6px',\r\n                                        fontSize: '14px',\r\n                                        fontWeight: '600'\r\n                                    }}>\r\n                                        {scanningPausedForSelection ? \r\n                                            'â¸ï¸ Paused for edition selection' :\r\n                                            'ðŸ” Scanning for MTG cards...'\r\n                                        }\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Scan Controls */}\r\n                            <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>\r\n                                {/* Scan Mode */}\r\n                                <div>\r\n                                    <label style={{ color: '#b0bec5', marginBottom: '8px', display: 'block' }}>\r\n                                        âš™ï¸ Scan Mode:\r\n                                    </label>\r\n                                    <div style={{ display: 'flex', gap: '8px' }}>\r\n                                        <button\r\n                                            onClick={() => setScanMode('continuous')}\r\n                                            disabled={isScanning}\r\n                                            style={{\r\n                                                flex: 1,\r\n                                                padding: '12px',\r\n                                                border: scanMode === 'continuous' ? '2px solid #4a90e2' : '1px solid #666',\r\n                                                background: scanMode === 'continuous' ? '#4a90e2' : 'rgba(74, 144, 226, 0.1)',\r\n                                                color: 'white',\r\n                                                borderRadius: '8px',\r\n                                                cursor: isScanning ? 'not-allowed' : 'pointer',\r\n                                                fontSize: '13px'\r\n                                            }}\r\n                                        >\r\n                                            ðŸ”¥ Smart Continuous\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => setScanMode('single')}\r\n                                            disabled={isScanning}\r\n                                            style={{\r\n                                                flex: 1,\r\n                                                padding: '12px',\r\n                                                border: scanMode === 'single' ? '2px solid #4a90e2' : '1px solid #666',\r\n                                                background: scanMode === 'single' ? '#4a90e2' : 'rgba(74, 144, 226, 0.1)',\r\n                                                color: 'white',\r\n                                                borderRadius: '8px',\r\n                                                cursor: isScanning ? 'not-allowed' : 'pointer',\r\n                                                fontSize: '13px'\r\n                                            }}\r\n                                        >\r\n                                            ðŸ“· Smart Single\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Start/Stop Button */}\r\n                                <button\r\n                                    onClick={isScanning ? stopScanning : startScanning}\r\n                                    disabled={cameraStatus !== 'ready'}\r\n                                    style={{\r\n                                        padding: '16px 24px',\r\n                                        border: 'none',\r\n                                        background: isScanning \r\n                                            ? 'linear-gradient(135deg, #dc3545, #c82333)' \r\n                                            : 'linear-gradient(135deg, #4a90e2, #64b5f6)',\r\n                                        color: 'white',\r\n                                        borderRadius: '8px',\r\n                                        cursor: cameraStatus !== 'ready' ? 'not-allowed' : 'pointer',\r\n                                        fontSize: '16px',\r\n                                        fontWeight: '600',\r\n                                        opacity: cameraStatus !== 'ready' ? 0.6 : 1\r\n                                    }}\r\n                                >\r\n                                    {isScanning ? 'â¹ï¸ Stop Scanning' : `ðŸ”¥ Start ${scanMode} Scan`}\r\n                                </button>\r\n\r\n                                {/* Cooldown Info */}\r\n                                {cooldownStatus && !cooldownStatus.canScan && (\r\n                                    <div style={{\r\n                                        background: 'rgba(251, 191, 36, 0.1)',\r\n                                        border: '1px solid rgba(251, 191, 36, 0.3)',\r\n                                        borderRadius: '8px',\r\n                                        padding: '12px',\r\n                                        textAlign: 'center',\r\n                                        fontSize: '13px'\r\n                                    }}>\r\n                                        <div style={{ color: '#fbbf24', fontWeight: '600' }}>\r\n                                            â³ Smart Cooldown Active\r\n                                        </div>\r\n                                        <div style={{ color: '#94a3b8', fontSize: '11px', marginTop: '4px' }}>\r\n                                            Preventing API spam for stable detection\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Card Display */}\r\n                        {isUIVisible && (\r\n                            <div style={{\r\n                                background: 'rgba(255, 255, 255, 0.05)',\r\n                                backdropFilter: 'blur(10px)',\r\n                                border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                                borderRadius: '15px',\r\n                                padding: '24px'\r\n                            }}>\r\n                                <h3 style={{ color: '#4a90e2', marginBottom: '20px' }}>ðŸŽ¯ Card Recognition</h3>\r\n                                \r\n                                {currentCard ? (\r\n                                    <div style={{\r\n                                        background: 'rgba(34, 197, 94, 0.1)',\r\n                                        border: '1px solid rgba(34, 197, 94, 0.3)',\r\n                                        borderRadius: '12px',\r\n                                        padding: '20px',\r\n                                        marginBottom: '16px'\r\n                                    }}>\r\n                                        <div style={{ fontSize: '20px', fontWeight: 'bold', color: '#22c55e', marginBottom: '12px' }}>\r\n                                            {currentCard.cardName}\r\n                                        </div>\r\n                                        \r\n                                        <div style={{ textAlign: 'left', fontSize: '14px', marginBottom: '12px' }}>\r\n                                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '6px' }}>\r\n                                                <span style={{ color: '#94a3b8' }}>Type:</span>\r\n                                                <span style={{ color: 'white', fontWeight: '600' }}>{currentCard.cardType || 'Unknown'}</span>\r\n                                            </div>\r\n                                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '6px' }}>\r\n                                                <span style={{ color: '#94a3b8' }}>Confidence:</span>\r\n                                                <span style={{ color: 'white', fontWeight: '600' }}>{currentCard.confidence}%</span>\r\n                                            </div>\r\n                                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '6px' }}>\r\n                                                <span style={{ color: '#94a3b8' }}>Method:</span>\r\n                                                <span style={{ color: 'white', fontWeight: '600' }}>\r\n                                                    {currentCard.scryfallVerified ? 'âœ… Scryfall Verified' : 'ðŸ§  AI Detection'}\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n                                        \r\n                                        {/* Confidence Bar */}\r\n                                        <div style={{\r\n                                            width: '100%',\r\n                                            height: '8px',\r\n                                            background: 'rgba(255, 255, 255, 0.1)',\r\n                                            borderRadius: '4px',\r\n                                            overflow: 'hidden',\r\n                                            marginBottom: '16px'\r\n                                        }}>\r\n                                            <div style={{\r\n                                                height: '100%',\r\n                                                background: 'linear-gradient(90deg, #22c55e, #34d399)',\r\n                                                width: `${currentCard.confidence}%`,\r\n                                                borderRadius: '4px',\r\n                                                transition: 'width 0.3s ease'\r\n                                            }}></div>\r\n                                        </div>\r\n\r\n                                        {/* Action Buttons */}\r\n                                        <div style={{ display: 'flex', gap: '8px' }}>\r\n                                            <button\r\n                                                onClick={() => saveCardToCollection(currentCard)}\r\n                                                style={{\r\n                                                    padding: '8px 16px',\r\n                                                    background: 'rgba(74, 144, 226, 0.2)',\r\n                                                    border: '1px solid #4a90e2',\r\n                                                    color: '#4a90e2',\r\n                                                    borderRadius: '6px',\r\n                                                    cursor: 'pointer',\r\n                                                    fontSize: '13px'\r\n                                                }}\r\n                                            >\r\n                                                ðŸ’¾ Save to Collection\r\n                                            </button>\r\n                                            {currentCard.scryfallUri && (\r\n                                                <button\r\n                                                    onClick={() => window.open(currentCard.scryfallUri, '_blank')}\r\n                                                    style={{\r\n                                                        padding: '8px 16px',\r\n                                                        background: 'rgba(34, 197, 94, 0.2)',\r\n                                                        border: '1px solid #22c55e',\r\n                                                        color: '#22c55e',\r\n                                                        borderRadius: '6px',\r\n                                                        cursor: 'pointer',\r\n                                                        fontSize: '13px'\r\n                                                    }}\r\n                                                >\r\n                                                    ðŸ”— View on Scryfall\r\n                                                </button>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                ) : (\r\n                                    <div style={{ textAlign: 'center', padding: '40px 20px' }}>\r\n                                        <div style={{ color: '#94a3b8', fontStyle: 'italic' }}>\r\n                                            {scanResult && !scanResult.hasCard ? \r\n                                                (scanResult.message || 'No MTG card detected') :\r\n                                                'No card detected. Position an MTG card in the camera view.'\r\n                                            }\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Scan History */}\r\n                                {scanHistory.length > 0 && (\r\n                                    <div style={{marginTop: '24px'}}>\r\n                                        <h4 style={{color: '#4a90e2', marginBottom: '16px', fontSize: '16px'}}>\r\n                                            ðŸ“Š Recent Scans\r\n                                        </h4>\r\n                                        <div style={{maxHeight: '200px', overflowY: 'auto'}}>\r\n                                            {scanHistory.map((card, index) => (\r\n                                                <div key={index} style={{\r\n                                                    padding: '12px',\r\n                                                    margin: '8px 0',\r\n                                                    background: 'rgba(74, 144, 226, 0.1)',\r\n                                                    borderRadius: '8px',\r\n                                                    fontSize: '13px',\r\n                                                    display: 'flex',\r\n                                                    justifyContent: 'space-between',\r\n                                                    alignItems: 'center',\r\n                                                    border: '1px solid rgba(74, 144, 226, 0.2)'\r\n                                                }}>\r\n                                                    <span style={{fontWeight: '600'}}>{card.cardName}</span>\r\n                                                    <span style={{color: '#64b5f6', fontWeight: '700'}}>{card.confidence}%</span>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </>\r\n                )}\r\n\r\n                {/* Collection Tab */}\r\n                {activeTab === 'deck' && (\r\n                    <div style={{\r\n                        background: 'rgba(255, 255, 255, 0.05)',\r\n                        backdropFilter: 'blur(10px)',\r\n                        border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                        borderRadius: '15px',\r\n                        padding: '32px',\r\n                        width: '100%'\r\n                    }}>\r\n                        <DeckManager \r\n                            savedCards={savedCards}\r\n                            onRemoveCard={removeCardFromCollection}\r\n                            onOpenScryfall={openCardInScryfall}\r\n                        />\r\n                    </div>\r\n                )}\r\n\r\n                {/* Knowledge Tab */}\r\n                {activeTab === 'knowledge' && (\r\n                    <div style={{\r\n                        background: 'rgba(255, 255, 255, 0.05)',\r\n                        backdropFilter: 'blur(10px)',\r\n                        border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                        borderRadius: '15px',\r\n                        padding: '32px',\r\n                        width: '100%'\r\n                    }}>\r\n                        <MTGKnowledgeBase \r\n                            currentCard={currentCard}\r\n                            savedCards={savedCards}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Status Bar */}\r\n            <div style={{\r\n                background: 'rgba(255, 255, 255, 0.05)',\r\n                backdropFilter: 'blur(10px)',\r\n                border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                borderRadius: '15px',\r\n                padding: '16px',\r\n                marginTop: '24px',\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center',\r\n                flexWrap: 'wrap',\r\n                gap: '16px'\r\n            }}>\r\n                <div style={{ display: 'flex', gap: '16px', flexWrap: 'wrap' }}>\r\n                    {scanHistory.length > 0 && (\r\n                        <>\r\n                            <span style={{ fontSize: '14px' }}>ðŸ“Š Scanned: {scanHistory.length}</span>\r\n                            {currentCard && (\r\n                                <span style={{ fontSize: '14px' }}>\r\n                                    ðŸŽ¯ Last: {currentCard.cardName} ({currentCard.confidence}%)\r\n                                </span>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </div>\r\n                <div style={{ display: 'flex', gap: '16px', alignItems: 'center', flexWrap: 'wrap' }}>\r\n                    <div style={{ fontWeight: 'bold', color: '#4a90e2' }}>\r\n                        MTG Scanner Pro\r\n                    </div>\r\n                    <span style={{ fontSize: '14px' }}>\r\n                        ðŸ”¥ Cooldown: {cooldownStatus.canScan ? 'Ready' : 'Active'}\r\n                    </span>\r\n                    <span style={{ fontSize: '14px' }}>\r\n                        ðŸ“· Camera: {cameraStatus === 'ready' ? 'Ready âœ…' : 'Initializing â³'}\r\n                    </span>\r\n                    <span style={{ fontSize: '14px' }}>ðŸ§  AI: Gemini Vision</span>\r\n                    <span style={{ fontSize: '14px' }}>{isPremiumUser ? 'ðŸ’Ž Premium' : 'ðŸ†“ Free'}</span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Edition Selector Modal */}\r\n            {showEditionSelector && (\r\n                <div style={{\r\n                    position: 'fixed',\r\n                    top: 0,\r\n                    left: 0,\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    background: 'rgba(0,0,0,0.9)',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    zIndex: 10000\r\n                }}>\r\n                    <div style={{\r\n                        background: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f1419 100%)',\r\n                        border: '2px solid #4a90e2',\r\n                        borderRadius: '16px',\r\n                        padding: '32px',\r\n                        maxWidth: '500px',\r\n                        width: '90%',\r\n                        textAlign: 'center',\r\n                        color: 'white'\r\n                    }}>\r\n                        <h3 style={{ color: '#4a90e2', marginBottom: '20px' }}>ðŸŽ­ Multiple Editions Found</h3>\r\n                        <p style={{ marginBottom: '20px', color: '#94a3b8' }}>\r\n                            Choose the correct edition for <strong style={{ color: '#4a90e2' }}>{pendingCardData?.cardName}</strong>:\r\n                        </p>\r\n                        \r\n                        <div style={{ maxHeight: '300px', overflowY: 'auto', marginBottom: '20px' }}>\r\n                            {availableEditions.map((edition, index) => (\r\n                                <div\r\n                                    key={index}\r\n                                    onClick={() => handleEditionSelected(edition)}\r\n                                    style={{\r\n                                        padding: '12px',\r\n                                        margin: '8px 0',\r\n                                        background: 'rgba(74, 144, 226, 0.1)',\r\n                                        border: '1px solid rgba(74, 144, 226, 0.3)',\r\n                                        borderRadius: '8px',\r\n                                        cursor: 'pointer',\r\n                                        textAlign: 'left'\r\n                                    }}\r\n                                >\r\n                                    <div style={{ fontWeight: '600', marginBottom: '4px' }}>\r\n                                        {edition.set_name || edition.name}\r\n                                    </div>\r\n                                    <div style={{ fontSize: '12px', color: '#94a3b8' }}>\r\n                                        Set: {(edition.set || 'Unknown').toUpperCase()} â€¢ {edition.released_at || 'Unknown date'}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        \r\n                        <button \r\n                            onClick={handleEditionCancelled}\r\n                            style={{\r\n                                padding: '12px 24px',\r\n                                background: 'transparent',\r\n                                border: '1px solid #666',\r\n                                color: '#94a3b8',\r\n                                borderRadius: '8px',\r\n                                cursor: 'pointer'\r\n                            }}\r\n                        >\r\n                            Skip Edition Selection\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Premium Upgrade Modal */}\r\n            {showPaywallModal && (\r\n                <div style={{\r\n                    position: 'fixed',\r\n                    top: 0,\r\n                    left: 0,\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    background: 'rgba(0,0,0,0.9)',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    zIndex: 10000\r\n                }}>\r\n                    <div style={{\r\n                        background: '#23272a',\r\n                        border: '2px solid #4a90e2',\r\n                        borderRadius: '16px',\r\n                        padding: '32px',\r\n                        maxWidth: '500px',\r\n                        width: '90%',\r\n                        textAlign: 'center',\r\n                        color: 'white'\r\n                    }}>\r\n                        <h3>ðŸ’Ž Upgrade to Premium</h3>\r\n                        \r\n                        <div style={{ margin: '20px 0', fontSize: '18px' }}>\r\n                            <p style={{ margin: '8px 0', lineHeight: '1.5' }}>\r\n                                You've reached the <strong>{FREE_COLLECTION_LIMIT} card limit</strong> for free users!\r\n                            </p>\r\n                        </div>\r\n                        \r\n                        <div style={{\r\n                            background: 'rgba(74, 144, 226, 0.1)',\r\n                            padding: '20px',\r\n                            borderRadius: '10px',\r\n                            margin: '20px 0'\r\n                        }}>\r\n                            <h4 style={{ margin: '0 0 15px 0', color: '#4a90e2' }}>Premium Features:</h4>\r\n                            <ul style={{ textAlign: 'left', lineHeight: '1.8', margin: 0, paddingLeft: '20px' }}>\r\n                                <li>ðŸ”¥ <strong>Unlimited collection storage</strong></li>\r\n                                <li>ðŸ§  <strong>Advanced AI learning</strong></li>\r\n                                <li>ðŸ“Š <strong>Collection analytics</strong></li>\r\n                                <li>ðŸ’° <strong>Price tracking & alerts</strong></li>\r\n                                <li>ðŸŽ¯ <strong>Deck optimization tools</strong></li>\r\n                                <li>âš¡ <strong>Priority customer support</strong></li>\r\n                            </ul>\r\n                        </div>\r\n                        \r\n                        <div style={{ display: 'flex', gap: '16px', justifyContent: 'center' }}>\r\n                            <button \r\n                                onClick={handleUpgradeToPremium}\r\n                                style={{\r\n                                    padding: '12px 24px',\r\n                                    border: 'none',\r\n                                    borderRadius: '8px',\r\n                                    background: 'linear-gradient(45deg, #4a90e2, #357abd)',\r\n                                    color: 'white',\r\n                                    fontWeight: 'bold',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            >\r\n                                ðŸ’Ž Upgrade for $9.99/month\r\n                            </button>\r\n                            <button \r\n                                onClick={() => setShowPaywallModal(false)}\r\n                                style={{\r\n                                    padding: '12px 24px',\r\n                                    border: '1px solid #666',\r\n                                    borderRadius: '8px',\r\n                                    background: 'transparent',\r\n                                    color: 'white',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            >\r\n                                Maybe Later\r\n                            </button>\r\n                        </div>\r\n                        \r\n                        <div style={{\r\n                            marginTop: '20px',\r\n                            paddingTop: '20px',\r\n                            borderTop: '1px solid #444',\r\n                            fontSize: '12px',\r\n                            color: '#ccc'\r\n                        }}>\r\n                            <p>ðŸ’³ Secure payment via PayPal</p>\r\n                            <p>ðŸ“§ Payment to: thediceyguy@gmail.com</p>\r\n                            <p>ðŸ”’ Cancel anytime, no long-term commitment</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Continue Scanning Dialog */}\r\n            {showContinueDialog && (\r\n                <div style={{\r\n                    position: 'fixed',\r\n                    top: 0,\r\n                    left: 0,\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    background: 'rgba(0,0,0,0.9)',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    zIndex: 10000\r\n                }}>\r\n                    <div style={{\r\n                        background: '#23272a',\r\n                        border: '2px solid #4a90e2',\r\n                        borderRadius: '16px',\r\n                        padding: '32px',\r\n                        maxWidth: '500px',\r\n                        width: '90%',\r\n                        textAlign: 'center',\r\n                        color: 'white'\r\n                    }}>\r\n                        <h3>ðŸ”¥ 10 Cards Scanned!</h3>\r\n                        <p style={{ margin: '8px 0', lineHeight: '1.5' }}>\r\n                            You've successfully scanned <strong>10 cards</strong> with the smart cooldown system.\r\n                        </p>\r\n                        <p style={{ margin: '8px 0', lineHeight: '1.5' }}>\r\n                            AI learned <strong>{Object.keys(editionPreferences).length}</strong> edition preferences.\r\n                        </p>\r\n                        <p style={{ margin: '8px 0', lineHeight: '1.5' }}>\r\n                            Total saved to collection: <strong>{savedCards.length}</strong> cards\r\n                        </p>\r\n                        \r\n                        <div style={{ display: 'flex', gap: '16px', justifyContent: 'center', marginTop: '20px' }}>\r\n                            <button \r\n                                onClick={handleContinueScanning}\r\n                                style={{\r\n                                    padding: '12px 24px',\r\n                                    border: 'none',\r\n                                    borderRadius: '8px',\r\n                                    background: 'linear-gradient(45deg, #4a90e2, #357abd)',\r\n                                    color: 'white',\r\n                                    fontWeight: 'bold',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            >\r\n                                ðŸ”¥ Continue Scanning\r\n                            </button>\r\n                            <button \r\n                                onClick={handleStopScanning}\r\n                                style={{\r\n                                    padding: '12px 24px',\r\n                                    border: '1px solid #666',\r\n                                    borderRadius: '8px',\r\n                                    background: 'transparent',\r\n                                    color: 'white',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            >\r\n                                â¹ï¸ Stop & Review\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Scanner;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}